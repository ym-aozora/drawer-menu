{"version":3,"sources":["webpack://Highendrawer/webpack/universalModuleDefinition","webpack://Highendrawer/webpack/bootstrap","webpack://Highendrawer/./src/helper.js","webpack://Highendrawer/./src/util.js","webpack://Highendrawer/./src/const.js","webpack://Highendrawer/./src/support.js","webpack://Highendrawer/./src/highendrawer.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","generateId","currentId","hasStyle","styles","ss","_util","isArray","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","style","dom","err","return","setStyle","unsetStyle","element","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","isHTMLElement","obj","HTMLElement","e","_typeof","nodeType","ownerDocument","addEventListenerWithOptions","target","type","handler","options","arguments","length","optionsOrCapture","_extends","passive","capture","addEventListener","supportsPassive","_const","document","createElement","validStyleName","opts","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","keys","vsn","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","PREFIX","pfx","nwp","ucFirst","str","charAt","toUpperCase","substr","toString","DRAWER_STYLE","freeze","display","position","overflowX","overflowY","zIndex","opacity","webkitOverflowScrolling","OVERLAY_STYLE","backgroundColor","top","right","bottom","left","TRANSITION_STYLE","transform","transitionProperty","transitionTimingFunction","transitionDuration","DEFAULT_DRAWER_PROPERTY","direction","size","maxSize","swipeable","swipeArea","duration","initCreate","enabledMaxWidth","history","overlay","onCreate","onDestroy","onOpen","onClose","onChangeState","onResize","onTouchStart","onTouchMove","onTouchFinish","onError","DEFAULT_OVERLAY_PROPERTY","autoCreate","DEFAULT_PROCESS","touches","isTouchActive","isTouchPointActive","isTouchDirectionActive","time","start","end","TOUCH_EVENTS","_helper","sup","transform3d","transition","cssAnim","transrate","support","helper","_support","Highendrawer","drawer","_this","this","_classCallCheck","state","_id","_drawer","_overlay","_timeoutId","_intervalId","_process","_enabled","_handler","_getDrawerHandler","Error","innerWidth","destroy","create","pushState","replaceState","id","_createDrawer","_createOverlay","apply","close","_destroyDrawer","_destroyOverlay","isFireEvent","isChangeHistory","_changeState","fail","_getMinPosition","_this2","Promise","resolve","reject","then","_this3","_resetDrawer","forEach","_this4","removeEventListener","_this5","autoCreated","touchHandler","body","appendChild","parentNode","removeChild","isUnset","_setProps","ims","_getInitDrawerStyle","sizePixel","_normalizePixel","maxSizePixel","_sizePixel","_position","width","height","minp","_hideDrawer","_hideOverlay","_getOverlayStyle","_getOverlayOpacityFromPosition","_getDrawerStyle","_this6","Date","fromOpy","_getOverlayOpacityFromStyle","toOpy","fromPos","_getDrawerPositionFromStyle","toPos","clearInterval","setInterval","nowPos","nowOpy","prp","len","moveInfo","_getTouchMoveInfo","vertical","axis","horizontal","y","x","_getStateFromPosition","_this7","_touchHandler","bind","popstate","ev","touch","push","_onTouchStart","_onTouchMove","_onTouchFinish","getTime","_isTouchPointActive","_isTouchDirectionActive","isFireTouchStart","_showOverlay","_showDrawer","stopPropagation","preventDefault","_getDrawerPositionFromTouches","_getTouchMoveState","changeState","_this8","callbacks","_handleCallback","du","clearTimeout","back","setTimeout","_changeOverlayState","rg","_getRange","from","clientX","to","clientY","pos","Math","abs","touchbasis","touchlast","distance","_getDistance","curpos","round","_normalizeNumber","posRatio","parseFloat","basis","_convertPixelAbs","innerHeight","nValue","unit","String","match","Number","replace","offsetHeight","offsetWidth","promise","_this9","key","callback","cb","rcb","prom","catch","reduce"],"mappings":"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","file":"highendrawer.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Highendrawer\"] = factory();\n\telse\n\t\troot[\"Highendrawer\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","import {PREFIX} from './const';\nimport {isArray, ucFirst} from './util';\n\nconst dom = window.document.createElement('div');\nconst validStyleName = {};\nlet currentId = 0;\n\n// Feature detection for method 'preventDefault' of event.\nlet supportsPassive = false;\n\ntry {\n  const opts = Object.defineProperty({}, 'passive', {\n    get: () => {\n      supportsPassive = true;\n    },\n  });\n\n  window.addEventListener('supportsPassiveTestEvent', null, opts);\n} catch (e) {}\n\n/**\n * Generate ID.\n *\n * @return {number} ID.\n */\nexport function generateId() {\n  return ++currentId;\n}\n\n/**\n * Verify that the style is present.\n *\n * @param {string[]|string} styles Css styles.\n * @return {boolean} Result of verification.\n */\nexport function hasStyle(styles) {\n  const ss = isArray(styles) ? styles : [styles];\n\n  for (let style of ss) {\n    if (typeof dom.style[style] !== 'undefined') {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n/**\n * Set the CSS style to element.\n *\n * @param {Object} element Target element object.\n * @param {Object} style Css style.\n */\nexport function setStyle(element, style) {\n  for (let name of Object.keys(style)) {\n    const vsn = validStyleName[name];\n\n    if (vsn) {\n      element.style[vsn] = style[name];\n    } else if (typeof element.style[name] === 'undefined') {\n      for (let i = 0; i < 2; i++) {\n        for (let pfx of PREFIX) {\n          const nwp = (i === 0 ? pfx : ucFirst(pfx)) +\n            ucFirst(name);\n\n          if (typeof element.style[nwp] !== 'undefined') {\n            validStyleName[name] = nwp;\n            element.style[nwp] = style[name];\n            break;\n          }\n        }\n      }\n    } else {\n      validStyleName[name] = name;\n      element.style[name] = style[name];\n    }\n  }\n}\n\n/**\n * Unset the CSS style to element.\n *\n * @param {Object} element Target element object.\n * @param {string[]|string} styles Css styles.\n */\nexport function unsetStyle(element, styles) {\n  const style = {};\n\n  for (let name of isArray(styles) ? styles : [styles]) {\n    style[name] = '';\n  }\n\n  setStyle(element, style);\n}\n\n/**\n * Validate HTMLElement.\n *\n * @param {*} obj HTMLElement to be verified.\n * @return {boolean} Result of valid HTMLElement.\n */\nexport function isHTMLElement(obj) {\n  try {\n    return obj instanceof HTMLElement;\n  } catch (e) {\n    return (typeof obj === 'object') &&\n      (obj.nodeType === 1) &&\n      (typeof obj.style === 'object') &&\n      (typeof obj.ownerDocument === 'object');\n  }\n}\n\n/**\n * Add event listener with options.\n *\n * @param {Object} target Target object.\n * @param {string} type Event type.\n * @param {function} handler Event handler.\n * @param {Object} [options={}] Event options.\n */\nexport function addEventListenerWithOptions(\n  target, type, handler, options = {}\n) {\n  const optionsOrCapture = Object.assign({\n    passive: true,\n    capture: false,\n  }, options);\n\n  target.addEventListener(type, handler, supportsPassive ?\n    optionsOrCapture :\n    optionsOrCapture.capture\n  );\n}\n","/**\n * Convert the first letter to uppercase.\n *\n * @param {string} str Target character string.\n * @return {string} Converted string.\n */\nexport function ucFirst(str) {\n  return str.charAt(0).toUpperCase() + str.substr(1);\n}\n\n/**\n * Whether or not the object is an array.\n *\n * @param {any} obj Target object.\n * @return {boolean} Returns true if object is an Array.\n */\nexport function isArray(obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]';\n}\n","/**\n * Vendor prefix list.\n *\n * @type {string[]}\n */\nexport const PREFIX = ['webkit', 'moz', 'o', 'ms'];\n\n/**\n * Drawer's default css style.\n *\n * @type {Object}\n */\nexport const DRAWER_STYLE = Object.freeze({\n  display: 'block',\n  position: 'fixed',\n  overflowX: 'hidden',\n  overflowY: 'auto',\n  zIndex: -1,\n  opacity: 0,\n  webkitOverflowScrolling: 'touch',\n});\n\n/**\n * Overlay's default css style.\n *\n * @type {Object}\n */\nexport const OVERLAY_STYLE = Object.freeze({\n  display: 'none',\n  backgroundColor: '#000',\n  position: 'fixed',\n  top: 0,\n  right: 0,\n  bottom: 0,\n  left: 0,\n  zIndex: -1,\n  opacity: 0,\n});\n\n/**\n * Css transition style.\n *\n * @type {Object}\n */\nexport const TRANSITION_STYLE = Object.freeze({\n  transform: '',\n  transitionProperty: 'transform,opacity',\n  transitionTimingFunction: 'cubic-bezier(0, 0.8, 0.95, 1)',\n  transitionDuration: '0ms',\n});\n\n/**\n * Default drawer property.\n *\n * @type {Drawer}\n */\nexport const DEFAULT_DRAWER_PROPERTY = Object.freeze({\n  element: null,\n  direction: 'right',\n  size: '80%',\n  maxSize: -1,\n  swipeable: true,\n  swipeArea: 20,\n  duration: 400,\n  zIndex: 9999,\n  style: {},\n  initCreate: true,\n  enabledMaxWidth: -1,\n  history: true,\n  overlay: null,\n  onCreate: null,\n  onDestroy: null,\n  onOpen: null,\n  onClose: null,\n  onChangeState: null,\n  onResize: null,\n  onTouchStart: null,\n  onTouchMove: null,\n  onTouchFinish: null,\n  onError: null,\n});\n\n/**\n * Default overlay property.\n *\n * @type {Overlay}\n */\nexport const DEFAULT_OVERLAY_PROPERTY = Object.freeze({\n  element: null,\n  opacity: 0.6,\n  zIndex: -1,\n  autoCreate: false,\n});\n\n/**\n * Default processing state object.\n *\n * @type {Object}\n */\nexport const DEFAULT_PROCESS = Object.freeze({\n  touches: [],\n  isTouchActive: null,\n  isTouchPointActive: null,\n  isTouchDirectionActive: null,\n  time: {\n    start: 0,\n    end: 0,\n  },\n});\n\n/**\n * Touch event list.\n *\n * @type {string[]}\n */\nexport const TOUCH_EVENTS = [\n  'touchstart',\n  'touchmove',\n  'touchend',\n  'touchcancel',\n];\n","import {hasStyle} from './helper';\n\n/**\n * Browser support information.\n *\n * @type {Object}\n */\nconst sup = {};\n\nsup.transform3d = hasStyle([\n  'perspectiveProperty',\n  'webkitPerspective',\n  'mozPerspective',\n  'oPerspective',\n  'msPerspective',\n]);\n\nsup.transform = hasStyle([\n  'transformProperty',\n  'webkitTransform',\n  'mozTransform',\n  'oTransform',\n  'msTransform',\n]);\n\nsup.transition = hasStyle([\n  'transitionProperty',\n  'webkitTransitionProperty',\n  'mozTransitionProperty',\n  'oTransitionProperty',\n  'msTransitionProperty',\n]);\n\nsup.cssAnim = (sup.transform3d || sup.transform) &&\n  sup.transition;\n\nsup.transrate = sup.transform3d ?\n  'translate3d' :\n  'translate';\n\n/**\n * Browser support information.\n *\n * @type {Object}\n */\nexport const support = Object.freeze(sup);\n","import {\n  DEFAULT_DRAWER_PROPERTY,\n  DEFAULT_OVERLAY_PROPERTY,\n  DEFAULT_PROCESS,\n  DRAWER_STYLE,\n  OVERLAY_STYLE,\n  TOUCH_EVENTS,\n  TRANSITION_STYLE,\n} from './const';\n\nimport {isArray} from './util';\nimport * as helper from './helper';\nimport {support} from './support';\n\n/**\n * Class providing a drawer function.\n *\n * @public\n * @class\n * @example\n * var drawer = new Highendrawer({\n *   element: document.getElementById('drawer')\n * });\n */\nexport default class Highendrawer {\n  /**\n   * Initialize object.\n   *\n   * @constructor\n   * @param {Drawer} drawer Initial parameters of drawer.\n   */\n  constructor(drawer) {\n    /**\n     * Drawer status ('open' or 'close')\n     *\n     * @public\n     * @type {string}\n     */\n    this.state = 'close';\n\n    this._id = helper.generateId();\n    this._drawer = Object.assign({}, DEFAULT_DRAWER_PROPERTY, drawer);\n    this._overlay = this._drawer.overlay === false ?\n      false :\n      Object.assign({}, DEFAULT_OVERLAY_PROPERTY, this._drawer.overlay);\n    this._timeoutId = null;\n    this._intervalId = null;\n    this._process = Object.assign({}, DEFAULT_PROCESS);\n    this._enabled = false;\n    this._handler = this._getDrawerHandler();\n\n    if (!this._drawer.element) {\n      throw new Error(`'element' is required.`);\n    }\n\n    if (!helper.isHTMLElement(this._drawer.element)) {\n      throw new Error(`Invalid HTMLElement specified for 'element'.`);\n    }\n\n    if (this._drawer.enabledMaxWidth > -1) {\n      helper.addEventListenerWithOptions(window, 'resize', () => {\n        if (this._enabled\n          && window.innerWidth > this._drawer.enabledMaxWidth) {\n          this.destroy();\n        } else if (!this._enabled\n          && window.innerWidth <= this._drawer.enabledMaxWidth) {\n          this.create();\n        }\n      });\n    }\n\n    if (window.history\n      && window.history.pushState\n      && this._drawer.history\n    ) {\n      window.history.replaceState({\n        id: this._id,\n      }, null, null);\n    }\n\n    if (this._drawer.initCreate\n      && (this._drawer.enabledMaxWidth < 0\n        || window.innerWidth <= this._drawer.enabledMaxWidth)\n    ) {\n      this.create();\n    }\n  }\n\n  /**\n   * Create the drawer set.\n   *\n   * @public\n   */\n  create() {\n    try {\n      this._createDrawer();\n      this._createOverlay();\n      this._enabled = true;\n\n      if (this._drawer.onCreate) {\n        this._drawer.onCreate.apply(this, [this._drawer]);\n      }\n    } catch (e) {\n      if (this._drawer && this._drawer.onError && typeof this._drawer.onError === 'function') {\n        this._drawer.onError.apply(this, [e]);\n      } else {\n        throw e;\n      }\n    }\n  }\n\n  /**\n   * Destroy the drawer set.\n   *\n   * @public\n   */\n  destroy() {\n    try {\n      if (this.state === 'open') {\n        this.close(0, true, true);\n      }\n\n      this._destroyDrawer();\n      this._destroyOverlay();\n      this._enabled = false;\n\n      if (this._drawer.onDestroy) {\n        this._drawer.onDestroy.apply(this, [this._drawer]);\n      }\n    } catch (e) {\n      if (this._drawer && this._drawer.onError && typeof this._drawer.onError === 'function') {\n        this._drawer.onError.apply(this, [e]);\n      } else {\n        throw e;\n      }\n    }\n  }\n\n  /**\n   * Open drawer.\n   *\n   * @public\n   * @param {number} [duration] Drawer moving time.\n   * @param {boolean} [isFireEvent] Whether to fire an event on the drawer.\n   * @param {boolean} [isChangeHistory=false] Make a change in history.\n   * @return {Promise} Promise object for open.\n   */\n  open(duration = null, isFireEvent = true, isChangeHistory = true) {\n    return this._changeState(\n      0,\n      duration,\n      {\n        onChangeState: isFireEvent ? this._drawer.onChangeState : null,\n        done: isFireEvent ? this._drawer.onOpen : null,\n        fail: isFireEvent ? this._drawer.onError : null,\n      },\n      isChangeHistory\n    );\n  }\n\n  /**\n   * Close drawer.\n   *\n   * @public\n   * @param {number} [duration] Drawer moving time.\n   * @param {boolean} [isFireEvent] Whether to fire an event on the drawer.\n   * @param {boolean} [isChangeHistory=false] Make a change in history.\n   * @return {Promise} Promise object for close.\n   */\n  close(duration = null, isFireEvent = true, isChangeHistory = true) {\n    return this._changeState(\n      this._getMinPosition(),\n      duration,\n      {\n        onChangeState: isFireEvent ? this._drawer.onChangeState : null,\n        done: isFireEvent ? this._drawer.onClose : null,\n        fail: isFireEvent ? this._drawer.onError : null,\n      },\n      isChangeHistory\n    );\n  }\n\n  /**\n   * Toggle drawer.\n   *\n   * @public\n   * @param {number} [duration] Drawer moving time.\n   * @param {boolean} [isFireEvent] Whether to fire an event on the drawer.\n   * @param {boolean} [isChangeHistory=false] Make a change in history.\n   * @return {Promise} Promise object for toggle.\n   */\n  toggle(duration = null, isFireEvent = true, isChangeHistory = true) {\n    return new Promise((resolve, reject) => {\n      try {\n        this[this.state === 'open' ? 'close' : 'open'](duration, isFireEvent, isChangeHistory)\n          .then(resolve, reject);\n      } catch (e) {\n        reject(e);\n      }\n    });\n  }\n\n  /**\n   * Create drawer.\n   */\n  _createDrawer() {\n    helper.setStyle(\n      this._drawer.element,\n      Object.assign(\n        {},\n        DRAWER_STYLE,\n        support.cssAnim ? TRANSITION_STYLE : {}\n      )\n    );\n\n    this._resetDrawer();\n\n    Object.keys(this._handler).forEach((name) => {\n      helper.addEventListenerWithOptions(window, name, this._handler[name], {\n        passive: name !== 'touchmove',\n      });\n    });\n  }\n\n  /**\n   * Destroy drawer.\n   */\n  _destroyDrawer() {\n    Object.keys(this._handler).forEach((name) => {\n      window.removeEventListener(name, this._handler[name]);\n    });\n\n    this._resetDrawer(true);\n\n    helper.unsetStyle(\n      this._drawer.element,\n      Object.keys(\n        Object.assign(\n          {},\n          DRAWER_STYLE,\n          support.cssAnim ? TRANSITION_STYLE : {}\n        )\n      )\n    );\n  }\n\n  /**\n   * Create overlay.\n   */\n  _createOverlay() {\n    if (this._overlay === false) {\n      return;\n    }\n\n    if (this._overlay.zIndex === -1) {\n      this._overlay.zIndex = this._drawer.zIndex - 1;\n    }\n\n    if (!this._overlay.element) {\n      this._overlay.element = window.document.createElement('div');\n      this._overlay.autoCreated = true;\n\n      helper.setStyle(\n        this._overlay.element,\n        Object.assign(\n          {},\n          OVERLAY_STYLE,\n          support.cssAnim ? TRANSITION_STYLE : {}\n        )\n      );\n    }\n\n    if (!this._overlay.touchHandler) {\n      this._overlay.touchHandler = (e) => {\n        this.close();\n      };\n    }\n\n    window.document.body.appendChild(this._overlay.element);\n  }\n\n  /**\n   * Destroy overlay.\n   */\n  _destroyOverlay() {\n    if (this._overlay === false) {\n      return;\n    }\n\n    if (this._overlay.element) {\n      this._overlay.element.removeEventListener('click', this._overlay.touchHandler);\n\n      if (this._overlay.autoCreated) {\n        this._overlay.element.parentNode.removeChild(this._overlay.element);\n      }\n    }\n  }\n\n  /**\n   * Reset drawer.\n   *\n   * @param {boolean} [isUnset] Unset style.\n   */\n  _resetDrawer(isUnset = false) {\n    try {\n      this._setProps();\n\n      const ims = this._getInitDrawerStyle();\n\n      if (isUnset) {\n        helper.unsetStyle(this._drawer.element, Object.keys(ims));\n      } else {\n        helper.setStyle(this._drawer.element, ims);\n      }\n    } catch (e) {\n      if (this._drawer.onError && typeof this._drawer.onError === 'function') {\n        this._drawer.onError.apply(this, [e]);\n      } else {\n        throw e;\n      }\n    }\n  }\n\n  /**\n   * Show drawer.\n   */\n  _showDrawer() {\n    helper.setStyle(this._drawer.element, {\n      zIndex: this._drawer.zIndex,\n      opacity: 1,\n    });\n  }\n\n  /**\n   * Hide drawer.\n   */\n  _hideDrawer() {\n    helper.setStyle(this._drawer.element, {\n      zIndex: -1,\n      opacity: 0,\n    });\n  }\n\n  /**\n   * Show overlay.\n   */\n  _showOverlay() {\n    helper.setStyle(this._overlay.element, {\n      zIndex: this._overlay.zIndex,\n      display: 'block',\n    });\n  }\n\n  /**\n   * Hide overlay.\n   */\n  _hideOverlay() {\n    helper.setStyle(this._overlay.element, {\n      zIndex: -1,\n      display: 'none',\n    });\n  }\n\n  /**\n   * Set properties.\n   */\n  _setProps() {\n    // set sizePixel\n    let sizePixel = this._normalizePixel(\n      this._drawer.size\n    );\n\n    if (this._drawer.maxSize && this._drawer.maxSize !== -1) {\n      let maxSizePixel = this._normalizePixel(\n        this._drawer.maxSize\n      );\n\n      if (sizePixel > maxSizePixel) {\n        sizePixel = maxSizePixel;\n      }\n    }\n\n    this._sizePixel = sizePixel;\n\n    // set position\n    this._position = typeof this._position === 'undefined' ?\n      null :\n      this._position;\n  }\n\n  /**\n   * Return initial style of drawer.\n   *\n   * @return {Object} Style for drawer.\n   */\n  _getInitDrawerStyle() {\n    let style = null;\n\n    switch (this._drawer.direction) {\n      case 'top':\n        style = {\n          width: '100%',\n          height: `${this._sizePixel}px`,\n          top: `-${this._sizePixel}px`,\n          right: 'auto',\n          bottom: 'auto',\n          left: 0,\n        };\n        break;\n      case 'right':\n        style = {\n          width: `${this._sizePixel}px`,\n          height: '100%',\n          top: 0,\n          right: `-${this._sizePixel}px`,\n          bottom: 'auto',\n          left: 'auto',\n        };\n        break;\n      case 'bottom':\n        style = {\n          width: '100%',\n          height: `${this._sizePixel}px`,\n          top: 'auto',\n          right: 'auto',\n          bottom: `-${this._sizePixel}px`,\n          left: 0,\n        };\n        break;\n      case 'left':\n        style = {\n          width: `${this._sizePixel}px`,\n          height: '100%',\n          top: 0,\n          right: 'auto',\n          bottom: 'auto',\n          left: `-${this._sizePixel}px`,\n        };\n        break;\n      default:\n        throw new Error(`'${this._drawer.direction}' does not support`);\n    }\n\n    return Object.assign(style, this._drawer.style || {});\n  }\n\n  /**\n   * Return style for moving the drawer.\n   *\n   * @param {number} position Moving position.\n   * @param {number} [duration] Drawer moving time.\n   * @return {Object} Move style for drawer.\n   */\n  _getDrawerStyle(position, duration = null) {\n    const minp = this._getMinPosition(this._drawer);\n    const style = {};\n\n    if (support.cssAnim) {\n      style.transitionDuration = `${duration === null ? this._drawer.duration : duration}ms`;\n\n      switch (this._drawer.direction) {\n        case 'top':\n          style.transform = `${support.transrate}(0,${-(minp - position)}px,0)`;\n          break;\n        case 'right':\n          style.transform = `${support.transrate}(${minp - position}px,0,0)`;\n          break;\n        case 'bottom':\n          style.transform = `${support.transrate}(0,${minp - position}px,0)`;\n          break;\n        case 'left':\n          style.transform = `${support.transrate}(${-(minp - position)}px,0,0)`;\n          break;\n        default:\n          throw new Error(`'${this._drawer.direction}' does not support`);\n      }\n    } else {\n      style[this._drawer.direction] = `${position}px`;\n    }\n\n    return style;\n  }\n\n  /**\n   * Return style for moving the overlay.\n   *\n   * @param {float} opacity Overlay opacity.\n   * @param {number} [duration] Drawer moving time.\n   * @return {Object} Move style for overlay.\n   */\n  _getOverlayStyle(opacity, duration = null) {\n    const style = {\n      opacity,\n    };\n\n    if (support.cssAnim) {\n      style.transitionDuration = `${duration === null ? this._drawer.duration : duration}ms`;\n    }\n\n    return style;\n  }\n\n  /**\n   * Change overlay state.\n   *\n   * @param {string} state Drawer status ('open' or 'close')\n   */\n  _changeOverlayState(state) {\n    if (state === 'open') {\n      helper.addEventListenerWithOptions(this._overlay.element, 'click', this._overlay.touchHandler);\n    } else {\n      this._hideDrawer();\n      this._hideOverlay();\n    }\n  }\n\n  /**\n   * Make animation with CSS3.\n   *\n   * @param {number} duration Drawer moving time.\n   */\n  _cssAnimate(duration) {\n    helper.setStyle(\n      this._overlay.element,\n      this._getOverlayStyle(\n        this._getOverlayOpacityFromPosition(this._position),\n        duration\n      )\n    );\n\n    helper.setStyle(\n      this._drawer.element,\n      this._getDrawerStyle(this._position, duration)\n    );\n  }\n\n  /**\n   * Make animation with Javascript.\n   *\n   * @param {number} duration Drawer moving time.\n   */\n  _jsAnimate(duration) {\n    const start = +new Date();\n    const fromOpy = this._getOverlayOpacityFromStyle();\n    const toOpy = this._getOverlayOpacityFromPosition(this._position);\n    const fromPos = this._getDrawerPositionFromStyle();\n    const toPos = this._position;\n\n    if (this._intervalId) {\n      clearInterval(this._intervalId);\n    }\n\n    this._intervalId = setInterval(() => {\n      let time = new Date() - start;\n      let nowPos = null;\n      let nowOpy = null;\n\n      if (time > duration) {\n        clearInterval(this._intervalId);\n        this._intervalId = null;\n        nowOpy = toOpy;\n        nowPos = toPos;\n      } else {\n        const prp = (time /= duration) * (time - 2);\n        nowOpy = fromOpy - ((toOpy - fromOpy) * prp);\n        nowPos = fromPos - ((toPos - fromPos) * prp);\n      }\n\n      helper.setStyle(\n        this._overlay.element,\n        this._getOverlayStyle(nowOpy, duration)\n      );\n\n      helper.setStyle(\n        this._drawer.element,\n        this._getDrawerStyle(nowPos, duration)\n      );\n    }, 10);\n  }\n\n  /**\n   * Return state by touch movement.\n   *\n   * @return {string} State by touch movement.\n   */\n  _getTouchMoveState() {\n    if (this._process.time.end - this._process.time.start <= 300) {\n      const len = this._process.touches.length;\n      const moveInfo = this._getTouchMoveInfo(\n        this._process.touches[len - 2],\n        this._process.touches[len - 1]\n      );\n      const vertical = moveInfo.axis === 'vertical';\n      const horizontal = moveInfo.axis === 'horizontal';\n      const top = this._drawer.direction === 'top' && moveInfo.y >= 0;\n      const right = this._drawer.direction === 'right' && moveInfo.x < 0;\n      const bottom = this._drawer.direction === 'bottom' && moveInfo.y < 0;\n      const left = this._drawer.direction === 'left' && moveInfo.x >= 0;\n\n      return (vertical && (bottom || top)) ||\n        (horizontal && (right || left)) ?\n        'open' :\n        'close';\n    }\n\n    return this._getStateFromPosition();\n  }\n\n  /**\n   * Return drawer event handler.\n   *\n   * @return {Object} Drawer event handler.\n   */\n  _getDrawerHandler() {\n    const handler = {};\n\n    handler.resize = () => {\n      this._resetDrawer();\n      this[this.state](0, false, false);\n\n      if (this._drawer.onResize) {\n        this._drawer.onResize.apply(\n          this,\n          [this._drawer]\n        );\n      }\n    };\n\n    if (this._drawer.swipeable) {\n      for (let event of TOUCH_EVENTS) {\n        handler[event] = this._touchHandler.bind(this);\n      }\n    }\n\n    if (window.history\n      && window.history.pushState\n      && this._drawer.history\n    ) {\n      handler.popstate = (e) => {\n        if (e.state && e.state.id === this._id && this.state === 'open') {\n          this.close(null, true, false);\n        }\n      };\n    }\n\n    return handler;\n  }\n\n  /**\n   * Touch event handler.\n   *\n   * @param {Event} ev Touch event object.\n   * @return {boolean} Event bubbling.\n   */\n  _touchHandler(ev) {\n    try {\n      if (ev.touches.length > 1) {\n        return true;\n      }\n\n      let touch = ev.touches[0];\n\n      if (touch) {\n        this._process.touches.push(touch);\n      }\n\n      switch (ev.type) {\n        case 'touchstart':\n          this._onTouchStart(ev);\n          break;\n        case 'touchmove':\n          this._onTouchMove(ev);\n          break;\n        case 'touchcancel':\n        case 'touchend':\n          this._onTouchFinish(ev);\n          break;\n        default:\n          break;\n      }\n    } catch (e) {\n      if (this._drawer.onError && typeof this._drawer.onError === 'function') {\n        this._drawer.onError.apply(this, [e]);\n      } else {\n        throw e;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Touch start event handler.\n   *\n   * @param {Event} ev Touch event object.\n   */\n  _onTouchStart(ev) {\n    this._process.time.start = new Date().getTime();\n  }\n\n  /**\n   * Touch move event handler.\n   *\n   * @param {Event} ev Touch event object.\n   */\n  _onTouchMove(ev) {\n    const len = this._process.touches.length;\n\n    if (len < 2) {\n      return;\n    }\n\n    if (!this._process.isTouchPointActive) {\n      this._process.isTouchPointActive = this._isTouchPointActive();\n    }\n\n    if (!this._process.isTouchPointActive) {\n      return;\n    }\n\n    if (this._process.isTouchDirectionActive === null) {\n      this._process.isTouchDirectionActive = this._isTouchDirectionActive();\n    }\n\n    if (!this._process.isTouchDirectionActive) {\n      return;\n    }\n\n    let isFireTouchStart = false;\n    const isTouchActive = this._process.isTouchPointActive &&\n        this._process.isTouchDirectionActive;\n\n    if (!isTouchActive) {\n      return;\n    }\n\n    if (!this._process.isTouchActive) {\n      this._process.isTouchActive = isTouchActive;\n      this._showOverlay();\n      this._showDrawer();\n\n      if (this._drawer.onTouchStart) {\n        isFireTouchStart = true;\n      }\n    }\n\n    ev.stopPropagation();\n    ev.preventDefault();\n\n    this._position = this._getDrawerPositionFromTouches(\n      this._process.touches[len - 2],\n      this._process.touches[len - 1]\n    );\n\n    if (isFireTouchStart) {\n      this._drawer.onTouchStart.apply(\n        this,\n        [this._drawer, this._position]\n      );\n    }\n\n    helper.setStyle(\n      this._overlay.element,\n      this._getOverlayStyle(\n        this._getOverlayOpacityFromPosition(this._position),\n        0\n      )\n    );\n\n    helper.setStyle(\n      this._drawer.element,\n      this._getDrawerStyle(this._position, 0)\n    );\n\n    if (this._drawer.onTouchMove) {\n      this._drawer.onTouchMove.apply(\n        this,\n        [this._drawer, this._position]\n      );\n    }\n  }\n\n  /**\n   * Touch finish event handler.\n   *\n   * @param {Event} ev Touch event object.\n   */\n  _onTouchFinish(ev) {\n    const len = this._process.touches.length;\n\n    if (this._process.isTouchActive && len >= 2) {\n      this._process.time.end = new Date().getTime();\n\n      const state = this._getTouchMoveState();\n      const changeState = this.state !== state;\n\n      this[state](null, changeState, changeState);\n\n      if (this._drawer.onTouchFinish) {\n        this._drawer.onTouchFinish.apply(\n          this,\n          [\n            this._drawer,\n            this._getDrawerPositionFromTouches(\n              this._process.touches[len - 2],\n              this._process.touches[len - 1]\n            ),\n          ]\n        );\n      }\n    }\n\n    this._process.touches = [];\n    this._process.isTouchActive = null;\n    this._process.isTouchPointActive = null;\n    this._process.isTouchDirectionActive = null;\n    this._process.time.start = 0;\n    this._process.time.end = 0;\n  }\n\n  /**\n   * Return whether or not a valid touch.\n   *\n   * @param {number} position Moving position.\n   * @param {number} [duration=null] Drawer moving time.\n   * @param {Object} [callbacks=null] Callback objects.\n   * @param {boolean} [isChangeHistory=false] Make a change in history.\n   * @return {Promise} Promise object.\n   */\n  _changeState(\n    position,\n    duration = null,\n    callbacks = null,\n    isChangeHistory = true\n  ) {\n    return this._handleCallback(new Promise((resolve, reject) => {\n      try {\n        if (!this._enabled) {\n          throw new Error('Drawer is disabled.');\n        }\n\n        this._position = position;\n\n        const du = duration === null ? this._drawer.duration : duration;\n\n        if (this._timeoutId !== null) {\n          clearTimeout(this._timeoutId);\n          this._timeoutId = null;\n        }\n\n        const state = this._getStateFromPosition();\n\n        if (state === 'open') {\n          this._showOverlay();\n          this._showDrawer();\n        } else {\n          this._overlay.element.removeEventListener('click', this._overlay.touchHandler);\n        }\n\n        if (isChangeHistory\n          && this._drawer.history\n          && window.history\n          && window.history.pushState\n        ) {\n          if (state === 'open') {\n            window.history.pushState({\n              id: this._id,\n            }, null, null);\n          } else {\n            window.history.back();\n          }\n        }\n\n        this[support.cssAnim\n          ? '_cssAnimate'\n          : '_jsAnimate'](du);\n\n        if (du > 0) {\n          this._timeoutId = setTimeout(\n            () => {\n              this._changeOverlayState(state);\n              this._timeoutId = null;\n            },\n            du\n          );\n        } else {\n          this._changeOverlayState(state);\n        }\n\n        this.state = state;\n\n        if (typeof callbacks === 'object' && callbacks.onChangeState) {\n          callbacks.onChangeState.apply(\n            this,\n            [this._drawer, state]\n          );\n        }\n\n        resolve.apply(this, [this._drawer]);\n      } catch (e) {\n        reject(e);\n      }\n    }), {\n      done: typeof callbacks === 'object' && callbacks.done ? callbacks.done : null,\n      fail: typeof callbacks === 'object' && callbacks.fail ? callbacks.fail : null,\n    });\n  }\n\n  /**\n   * Return whether or not a valid touch point.\n   *\n   * @return {boolean} Result of valid touch point.\n   */\n  _isTouchPointActive() {\n    const rg = this._getRange(\n      this.state === 'open' ?\n        this._sizePixel :\n        this._drawer.swipeArea\n    );\n    const len = this._process.touches.length;\n\n    return (rg.from.x <= this._process.touches[len - 2].clientX &&\n      this._process.touches[len - 2].clientX <= rg.to.x &&\n      rg.from.y <= this._process.touches[len - 2].clientY &&\n      this._process.touches[len - 2].clientY <= rg.to.y);\n  }\n\n  /**\n   * Return whether or not a valid touch direction.\n   *\n   * @return {boolean} Result of valid touch direction.\n   */\n  _isTouchDirectionActive() {\n    const len = this._process.touches.length;\n    const moveInfo = this._getTouchMoveInfo(\n      this._process.touches[len - 2],\n      this._process.touches[len - 1]\n    );\n    const vertical = moveInfo.axis === 'vertical';\n    const horizontal = moveInfo.axis === 'horizontal';\n\n    if (!(vertical &&\n      (this._drawer.direction === 'top' ||\n      this._drawer.direction === 'bottom') ||\n      horizontal &&\n      (this._drawer.direction === 'right' ||\n      this._drawer.direction === 'left'))\n    ) {\n      return false;\n    }\n\n    return (\n      (\n        this.state === 'open' &&\n        (\n          this._drawer.direction === 'top' && moveInfo.y < 0 ||\n          this._drawer.direction === 'right' && moveInfo.x >= 0 ||\n          this._drawer.direction === 'bottom' && moveInfo.y >= 0 ||\n          this._drawer.direction === 'left' && moveInfo.x < 0\n        )\n      ) ||\n      (\n        this.state === 'close' &&\n        (\n          this._drawer.direction === 'top' && moveInfo.y >= 0 ||\n          this._drawer.direction === 'right' && moveInfo.x < 0 ||\n          this._drawer.direction === 'bottom' && moveInfo.y < 0 ||\n          this._drawer.direction === 'left' && moveInfo.x >= 0\n        )\n      )\n    );\n  }\n\n  /**\n   * Return the state of the drawer.\n   *\n   * @return {string} State of the drawer.\n   */\n  _getStateFromPosition() {\n    const pos = this._position === null ?\n      this._getDrawerPositionFromStyle() :\n      this._position;\n\n    return Math.abs(pos) < this._sizePixel / 2 ?\n      'open' :\n      'close';\n  }\n\n  /**\n   * Return the position of the drawer.\n   *\n   * @param {Object} touchbasis Basic touch information.\n   * @param {Object} touchlast Last touch information.\n   * @return {number} Position of the drawer.\n   */\n  _getDrawerPositionFromTouches(touchbasis, touchlast) {\n    const distance = this._getDistance(\n      this._getTouchMoveInfo(touchbasis, touchlast)\n    );\n    const curpos = this._position === null ?\n      this._getDrawerPositionFromStyle() :\n      this._position;\n    const minp = this._getMinPosition(this._drawer);\n    let pos = Math.round(curpos + distance);\n\n    if (pos > 0) {\n      pos = 0;\n    } else if (pos < minp) {\n      pos = minp;\n    }\n\n    return pos;\n  }\n\n  /**\n   * Return the position in the style.\n   *\n   * @return {number} Position in the style.\n   */\n  _getDrawerPositionFromStyle() {\n    const value = this._drawer.element.style[this._drawer.direction];\n    return this._normalizeNumber(value).value;\n  }\n\n  /**\n   * Return the opacity of the overlay.\n   *\n   * @param {number} position Moving position.\n   * @return {number} Position of the drawer.\n   */\n  _getOverlayOpacityFromPosition(position) {\n    const minp = this._getMinPosition(this._drawer);\n    const posRatio = 1 - (Math.abs(position) / Math.abs(minp));\n    return ((this._overlay.opacity * posRatio) * 10000) / 10000;\n  }\n\n  /**\n   * Return the opacity in the style.\n   *\n   * @return {number} Opacity in the style.\n   */\n  _getOverlayOpacityFromStyle() {\n    return parseFloat(this._overlay.element.style.opacity);\n  }\n\n  /**\n   * Return the swipe range.\n   *\n   * @param {string|number} value Target swipe area value.\n   * @return {Object} Drag range.\n   * @throws {Error} Is thrown if direction value is invalid.\n   */\n  _getRange(value) {\n    const basis = this._convertPixelAbs(value);\n    const width = window.innerWidth;\n    const height = window.innerHeight;\n\n    switch (this._drawer.direction) {\n      case 'top':\n        return {from: {x: 0, y: 0}, to: {x: width, y: basis}};\n      case 'right':\n        return {from: {x: basis, y: 0}, to: {x: width, y: height}};\n      case 'bottom':\n        return {from: {x: 0, y: basis}, to: {x: width, y: height}};\n      case 'left':\n        return {from: {x: 0, y: 0}, to: {x: basis, y: height}};\n      default:\n        throw new Error(`'${this._drawer.direction}' does not support`);\n    }\n  }\n\n  /**\n   * Return a value converted to the absolute value of the pixel.\n   *\n   * @param {string|number} value Target value.\n   * @return {number} Converted to the absolute value of the pixel.\n   * @throws {Error} Is thrown if direction value is invalid.\n   */\n  _convertPixelAbs(value) {\n    const nValue = this._normalizePixel(value);\n\n    switch (this._drawer.direction) {\n      case 'top':\n      case 'left':\n        return nValue;\n      case 'right':\n        return window.innerWidth - nValue;\n      case 'bottom':\n        return window.innerHeight - nValue;\n      default:\n        throw new Error(`'${this._drawer.direction}' does not support`);\n    }\n  }\n\n  /**\n   * Return the normalized pixel value.\n   *\n   * @param {string|number} value Target value.\n   * @return {number} Normalized pixel value.\n   * @throws {Error} Is thrown if direction value is invalid.\n   */\n  _normalizePixel(value) {\n    const nValue = this._normalizeNumber(value);\n\n    if (nValue.unit === 'number' || nValue.unit === 'pixel') {\n      return nValue.value;\n    } else if (nValue.unit === 'percent') {\n      switch (this._drawer.direction) {\n        case 'top':\n        case 'bottom':\n          return window.innerHeight * (nValue.value / 100);\n        case 'right':\n        case 'left':\n          return window.innerWidth * (nValue.value / 100);\n        default:\n          throw new Error(`'${this._drawer.direction}' does not support`);\n      }\n    }\n  }\n\n  /**\n   * Return the numeric normalized information.\n   *\n   * @param {string|number} value Target value.\n   * @return {Object} Numeric normalized information.\n   * @throws {Error} Is thrown if value is invalid.\n   */\n  _normalizeNumber(value) {\n    if (typeof value === 'number') {\n      return {value: value, unit: 'number'};\n    } else if (String(value).match(/^[.\\-0-9]+$/)) {\n      return {value: Number(value), unit: 'number'};\n    } else if (value.match(/^[.\\-0-9]+px$/)) {\n      return {value: Number(value.replace(/px$/ig, '')), unit: 'pixel'};\n    } else if (value.match(/[.\\-0-9]+%$/)) {\n      return {value: Number(value.replace(/%$/ig, '')), unit: 'percent'};\n    }\n\n    throw new Error(`'${value}' does not support`);\n  }\n\n  /**\n   * Return to the minimum position for the drawer.\n   *\n   * @return {number} Minimum position for the drawer.\n   * @throws {Error} Is thrown if direction value is invalid.\n   */\n  _getMinPosition() {\n    switch (this._drawer.direction) {\n      case 'top':\n      case 'bottom':\n        return -1 * this._drawer.element.offsetHeight;\n      case 'right':\n      case 'left':\n        return -1 * this._drawer.element.offsetWidth;\n      default:\n        throw new Error(`'${this._drawer.direction}' does not support`);\n    }\n  }\n\n  /**\n   * Return the distance of the drawer.\n   *\n   * @param {Object} moveInfo Movement information of the drawer.\n   * @return {number} Distance of the drawer.\n   * @throws {Error} Is thrown if direction value is invalid.\n   */\n  _getDistance(moveInfo) {\n    switch (this._drawer.direction) {\n      case 'top':\n        return moveInfo.y;\n      case 'right':\n        return -1 * moveInfo.x;\n      case 'bottom':\n        return -1 * moveInfo.y;\n      case 'left':\n        return moveInfo.x;\n      default:\n        throw new Error(`'${this._drawer.direction}' does not support`);\n    }\n  }\n\n  /**\n   * Return the information of touch move.\n   *\n   * @param {Object} touchbasis Basic touch information.\n   * @param {Object} touchlast Last touch information.\n   * @return {Object} Movement distance of the x, y direction, movement direction.\n   */\n  _getTouchMoveInfo(touchbasis, touchlast) {\n    const x = touchlast.clientX - touchbasis.clientX;\n    const y = touchlast.clientY - touchbasis.clientY;\n    const axis = Math.abs(x) >= Math.abs(y) ? 'horizontal' : 'vertical';\n    return {x, y, axis};\n  }\n\n  /**\n   * Return the information of touch move.\n   *\n   * @param {Promise} promise Promise instance.\n   * @param {Object} callbacks Callback function with the key to 'done', 'fail', 'always' (each optional).\n   * @return {Promise} Promise instance.\n   */\n  _handleCallback(promise, callbacks) {\n    if (!callbacks) {\n      return promise;\n    }\n\n    for (let key of Object.keys(callbacks)) {\n      const callback = callbacks[key];\n\n      if (!callback) {\n        continue;\n      }\n\n      const cb = isArray(callback) ? callback : [callback];\n      const rcb = null;\n\n      switch (key) {\n        case 'done':\n          rcb = (prom, value) => prom.then(value.bind(this));\n          break;\n        case 'fail':\n          rcb = (prom, value) => prom.catch(value.bind(this));\n          break;\n        case 'always':\n          rcb = (prom, value) => prom.then(value.bind(this), value.bind(this));\n          break;\n        default:\n          break;\n      }\n\n      if (rcb) {\n        cb.reduce(rcb, promise);\n      }\n    }\n\n    return promise;\n  }\n}\n\nmodule.exports = Highendrawer;\n"],"sourceRoot":""}