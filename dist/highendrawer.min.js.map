{"version":3,"sources":["webpack://Highendrawer/webpack/universalModuleDefinition","webpack://Highendrawer/webpack/bootstrap","webpack://Highendrawer/./src/helper.js","webpack://Highendrawer/./src/util.js","webpack://Highendrawer/./src/const.js","webpack://Highendrawer/./src/support.js","webpack://Highendrawer/./src/highendrawer.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","generateid","currentid","hasstyle","styles","ss","_util","isarray","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","style","dom","err","return","setstyle","unsetstyle","element","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_const","document","createElement","validstylename","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","keys","vsn","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","PREFIX","pfx","namewithprefix","ucfirst","str","charAt","toUpperCase","substr","obj","toString","DRAWER_STYLE","freeze","display","position","overflowX","overflowY","zIndex","opacity","webkitOverflowScrolling","OVERLAY_STYLE","backgroundColor","top","right","bottom","left","TRANSITION_STYLE","transform","transitionProperty","transitionTimingFunction","transitionDuration","DEFAULT_DRAWER_PROPERTY","direction","size","maxsize","swipeable","swipearea","duration","zindex","initcreate","enabledmaxwidth","history","overlay","oncreate","ondestroy","onopen","onclose","onchangestate","onresize","ontouchstart","ontouchmove","ontouchfinish","onerror","DEFAULT_OVERLAY_PROPERTY","autocreate","DEFAULT_PROCESS","touches","istouchactive","istouchpointactive","istouchdirectionactive","time","start","end","TOUCH_EVENTS","_helper","sup","transform3d","transition","cssanim","transrate","support","helper","_support","Highendrawer","drawer","_this","this","_classCallCheck","state","_id","_drawer","_extends","_overlay","_timeoutid","_intervalid","_process","_enabled","_handler","_getdrawerhandler","Error","_isHTMLElement","addEventListener","innerWidth","destroy","create","pushState","replaceState","id","_createdrawer","_createoverlay","apply","e","close","_destroydrawer","_destroyoverlay","arguments","length","isfireevent","ischangehistory","_changestate","fail","_getminposition","_this2","Promise","resolve","reject","then","_this3","_resetdrawer","forEach","_this4","removeEventListener","_this5","isautocreated","touchhandler","body","appendChild","parentNode","removeChild","isunset","_setprops","ims","_getinitdrawerstyle","sizepixel","_normalizepixel","maxsizepixel","_sizepixel","_position","width","height","minp","_getoverlaystyle","_getoverlayopacityfromposition","_getdrawerstyle","_this6","Date","fromopy","_getoverlayopacityfromstyle","toopy","frompos","_getdrawerpositionfromstyle","topos","clearInterval","setInterval","nowpos","nowopy","prp","len","moveinfo","_gettouchmoveinfo","vertical","axis","horizontal","y","x","_getstatefromposition","_this7","handler","_touchhandler","bind","popstate","ev","touch","push","type","_ontouchstart","_ontouchmove","_ontouchfinish","getTime","_istouchpointactive","_istouchdirectionactive","isfiretouchstart","_showoverlay","_showdrawer","stopPropagation","preventDefault","_getdrawerpositionfromtouches","_gettouchmovestate","changestate","_this8","callbacks","_handlecallback","du","clearTimeout","back","setTimeout","_hidedrawer","_hideoverlay","_typeof","rg","_getrange","from","clientX","to","clientY","pos","Math","abs","touchbasis","touchlast","distance","_getdistance","curpos","round","_normalizenumber","posratio","parseFloat","basis","_convertpixelabs","innerHeight","nvalue","normalized","unit","String","match","Number","replace","offsetHeight","offsetWidth","HTMLElement","nodeType","ownerDocument","promise","_this9","key","callback","cb","rcb","prom","catch","reduce"],"mappings":"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","file":"highendrawer.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Highendrawer\"] = factory();\n\telse\n\t\troot[\"Highendrawer\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","'use strict';\n\nimport {PREFIX} from './const';\nimport {isarray, ucfirst} from './util';\n\nconst dom = window.document.createElement('div');\n\nlet currentid = 0;\nlet validstylename = {};\n\n/**\n * Generate ID.\n *\n * @return {number} ID.\n */\nexport function generateid() {\n  return ++currentid;\n}\n\n/**\n * Verify that the style is present.\n *\n * @param {string[]|string} styles Css styles.\n * @return {boolean} Result of verification.\n */\nexport function hasstyle(styles) {\n  let ss = styles;\n\n  if (!isarray(styles)) {\n    ss = [styles];\n  }\n\n  for (let style of ss) {\n    if (typeof dom.style[style] !== 'undefined') {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n/**\n * Set the CSS style to element.\n *\n * @param {Object} element Target element object.\n * @param {Object} style Css style.\n */\nexport function setstyle(element, style) {\n  for (let name of Object.keys(style)) {\n    let vsn = validstylename[name];\n\n    if (vsn) {\n      element.style[vsn] = style[name];\n    } else if (typeof element.style[name] === 'undefined') {\n      for (let i = 0; i < 2; i++) {\n        for (let pfx of PREFIX) {\n          let namewithprefix = (i === 0 ? pfx : ucfirst(pfx)) +\n            ucfirst(name);\n\n          if (typeof element.style[namewithprefix] !== 'undefined') {\n            validstylename[name] = namewithprefix;\n            element.style[namewithprefix] = style[name];\n            break;\n          }\n        }\n      }\n    } else {\n      validstylename[name] = name;\n      element.style[name] = style[name];\n    }\n  }\n}\n\n/**\n * Unset the CSS style to element.\n *\n * @param {Object} element Target element object.\n * @param {string[]|string} styles Css styles.\n */\nexport function unsetstyle(element, styles) {\n  let style = {};\n\n  for (let name of isarray(styles) ? styles : [styles]) {\n    style[name] = '';\n  }\n\n  setstyle(element, style);\n}\n","'use strict';\n\n/**\n * Convert the first letter to uppercase.\n *\n * @param {string} str Target character string.\n * @return {string} Converted string.\n */\nexport function ucfirst(str) {\n  return str.charAt(0).toUpperCase() + str.substr(1);\n}\n\n/**\n * Whether or not the object is an array.\n *\n * @param {any} obj Target object.\n * @return {boolean} Returns true if object is an Array.\n */\nexport function isarray(obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]';\n}\n","'use strict';\n\n/**\n * Vendor prefix list.\n *\n * @type {string[]}\n */\nexport const PREFIX = ['webkit', 'moz', 'o', 'ms'];\n\n/**\n * Drawer's default css style.\n *\n * @type {Object}\n */\nexport const DRAWER_STYLE = Object.freeze({\n  display: 'block',\n  position: 'fixed',\n  overflowX: 'hidden',\n  overflowY: 'auto',\n  zIndex: -1,\n  opacity: 0,\n  webkitOverflowScrolling: 'touch',\n});\n\n/**\n * Overlay's default css style.\n *\n * @type {Object}\n */\nexport const OVERLAY_STYLE = Object.freeze({\n  display: 'none',\n  backgroundColor: '#000',\n  position: 'fixed',\n  top: 0,\n  right: 0,\n  bottom: 0,\n  left: 0,\n  zIndex: -1,\n  opacity: 0,\n});\n\n/**\n * Css transition style.\n *\n * @type {Object}\n */\nexport const TRANSITION_STYLE = Object.freeze({\n  transform: '',\n  transitionProperty: 'transform,opacity',\n  transitionTimingFunction: 'cubic-bezier(0, 0.8, 0.95, 1)',\n  transitionDuration: '0ms',\n});\n\n/**\n * Default drawer property.\n *\n * @type {Drawer}\n */\nexport const DEFAULT_DRAWER_PROPERTY = Object.freeze({\n  element: null,\n  direction: 'right',\n  size: '80%',\n  maxsize: -1,\n  swipeable: true,\n  swipearea: 20,\n  duration: 400,\n  zindex: 9999,\n  style: {},\n  initcreate: true,\n  enabledmaxwidth: -1,\n  history: true,\n  overlay: null,\n  oncreate: null,\n  ondestroy: null,\n  onopen: null,\n  onclose: null,\n  onchangestate: null,\n  onresize: null,\n  ontouchstart: null,\n  ontouchmove: null,\n  ontouchfinish: null,\n  onerror: null,\n});\n\n/**\n * Default overlay property.\n *\n * @type {Overlay}\n */\nexport const DEFAULT_OVERLAY_PROPERTY = Object.freeze({\n  element: null,\n  opacity: 0.6,\n  zindex: -1,\n  autocreate: false,\n});\n\n/**\n * Default processing state object.\n *\n * @type {Object}\n */\nexport const DEFAULT_PROCESS = Object.freeze({\n  touches: [],\n  istouchactive: null,\n  istouchpointactive: null,\n  istouchdirectionactive: null,\n  time: {\n    start: 0,\n    end: 0,\n  },\n});\n\n/**\n * Touch event list.\n *\n * @type {string[]}\n */\nexport const TOUCH_EVENTS = [\n  'touchstart',\n  'touchmove',\n  'touchend',\n  'touchcancel',\n];\n","'use strict';\n\nimport {hasstyle} from './helper';\n\n/**\n * Browser support information.\n *\n * @type {Object}\n */\nlet sup = {};\n\nsup.transform3d = hasstyle([\n  'perspectiveProperty',\n  'webkitPerspective',\n  'mozPerspective',\n  'oPerspective',\n  'msPerspective',\n]);\n\nsup.transform = hasstyle([\n  'transformProperty',\n  'webkitTransform',\n  'mozTransform',\n  'oTransform',\n  'msTransform',\n]);\n\nsup.transition = hasstyle([\n  'transitionProperty',\n  'webkitTransitionProperty',\n  'mozTransitionProperty',\n  'oTransitionProperty',\n  'msTransitionProperty',\n]);\n\nsup.cssanim = (sup.transform3d || sup.transform) &&\n  sup.transition;\n\nsup.transrate = sup.transform3d ?\n  'translate3d' :\n  'translate';\n\n/**\n * Browser support information.\n *\n * @type {Object}\n */\nexport const support = Object.freeze(sup);\n","import {\n  DEFAULT_DRAWER_PROPERTY,\n  DEFAULT_OVERLAY_PROPERTY,\n  DEFAULT_PROCESS,\n  DRAWER_STYLE,\n  OVERLAY_STYLE,\n  TOUCH_EVENTS,\n  TRANSITION_STYLE,\n} from './const';\n\nimport {isarray} from './util';\nimport * as helper from './helper';\nimport {support} from './support';\n\n/**\n * Class providing a drawer function.\n *\n * @public\n * @class\n * @example\n * var drawer = new Highendrawer({\n *   element: document.getElementById('drawer')\n * });\n */\nexport default class Highendrawer {\n  /**\n   * Initialize object.\n   *\n   * @constructor\n   * @param {Drawer} drawer Initial parameters of drawer.\n   */\n  constructor(drawer) {\n    /**\n     * Drawer status ('open' or 'close')\n     *\n     * @public\n     * @type {string}\n     */\n    this.state = 'close';\n\n    this._id = helper.generateid();\n    this._drawer = Object.assign({}, DEFAULT_DRAWER_PROPERTY, drawer);\n    this._overlay = this._drawer.overlay === false ?\n      false :\n      Object.assign({}, DEFAULT_OVERLAY_PROPERTY, this._drawer.overlay);\n    this._timeoutid = null;\n    this._intervalid = null;\n    this._process = Object.assign({}, DEFAULT_PROCESS);\n    this._enabled = false;\n    this._handler = this._getdrawerhandler();\n\n    if (!this._drawer.element) {\n      throw new Error(`'element' is required.`);\n    }\n\n    if (!this._isHTMLElement(this._drawer.element)) {\n      throw new Error(`Invalid HTMLElement specified for 'element'.`);\n    }\n\n    if (this._drawer.enabledmaxwidth > -1) {\n      window.addEventListener('resize', () => {\n        if (this._enabled\n          && window.innerWidth > this._drawer.enabledmaxwidth) {\n          this.destroy();\n        } else if (!this._enabled\n          && window.innerWidth <= this._drawer.enabledmaxwidth) {\n          this.create();\n        }\n      });\n    }\n\n    if (window.history\n      && window.history.pushState\n      && this._drawer.history\n    ) {\n      window.history.replaceState({\n        id: this._id,\n      }, null, null);\n    }\n\n    if (this._drawer.initcreate\n      && (this._drawer.enabledmaxwidth < 0\n        || window.innerWidth <= this._drawer.enabledmaxwidth)\n    ) {\n      this.create();\n    }\n  }\n\n  /**\n   * Create the drawer set.\n   *\n   * @public\n   */\n  create() {\n    try {\n      this._createdrawer();\n      this._createoverlay();\n      this._enabled = true;\n\n      if (this._drawer.oncreate) {\n        this._drawer.oncreate.apply(this, [this._drawer]);\n      }\n    } catch (e) {\n      if (this._drawer && this._drawer.onerror && typeof this._drawer.onerror === 'function') {\n        this._drawer.onerror.apply(this, [e]);\n      } else {\n        throw e;\n      }\n    }\n  }\n\n  /**\n   * Destroy the drawer set.\n   *\n   * @public\n   */\n  destroy() {\n    try {\n      if (this.state === 'open') {\n        this.close(0, true, true);\n      }\n\n      this._destroydrawer();\n      this._destroyoverlay();\n      this._enabled = false;\n\n      if (this._drawer.ondestroy) {\n        this._drawer.ondestroy.apply(this, [this._drawer]);\n      }\n    } catch (e) {\n      if (this._drawer && this._drawer.onerror && typeof this._drawer.onerror === 'function') {\n        this._drawer.onerror.apply(this, [e]);\n      } else {\n        throw e;\n      }\n    }\n  }\n\n  /**\n   * Open drawer.\n   *\n   * @public\n   * @param {number} [duration] Drawer moving time.\n   * @param {boolean} [isfireevent] Whether to fire an event on the drawer.\n   * @param {boolean} [ischangehistory=false] Make a change in history.\n   * @return {Promise} Promise object for open.\n   */\n  open(duration = null, isfireevent = true, ischangehistory = true) {\n    return this._changestate(\n      0,\n      duration,\n      {\n        onchangestate: isfireevent ? this._drawer.onchangestate : null,\n        done: isfireevent ? this._drawer.onopen : null,\n        fail: isfireevent ? this._drawer.onerror : null,\n      },\n      ischangehistory\n    );\n  }\n\n  /**\n   * Close drawer.\n   *\n   * @public\n   * @param {number} [duration] Drawer moving time.\n   * @param {boolean} [isfireevent] Whether to fire an event on the drawer.\n   * @param {boolean} [ischangehistory=false] Make a change in history.\n   * @return {Promise} Promise object for close.\n   */\n  close(duration = null, isfireevent = true, ischangehistory = true) {\n    return this._changestate(\n      this._getminposition(),\n      duration,\n      {\n        onchangestate: isfireevent ? this._drawer.onchangestate : null,\n        done: isfireevent ? this._drawer.onclose : null,\n        fail: isfireevent ? this._drawer.onerror : null,\n      },\n      ischangehistory\n    );\n  }\n\n  /**\n   * Toggle drawer.\n   *\n   * @public\n   * @param {number} [duration] Drawer moving time.\n   * @param {boolean} [isfireevent] Whether to fire an event on the drawer.\n   * @param {boolean} [ischangehistory=false] Make a change in history.\n   * @return {Promise} Promise object for toggle.\n   */\n  toggle(duration = null, isfireevent = true, ischangehistory = true) {\n    return new Promise((resolve, reject) => {\n      try {\n        this[this.state === 'open' ? 'close' : 'open'](duration, isfireevent, ischangehistory)\n          .then(resolve, reject);\n      } catch (e) {\n        reject(e);\n      }\n    });\n  }\n\n  /**\n   * Create drawer.\n   */\n  _createdrawer() {\n    helper.setstyle(\n      this._drawer.element,\n      Object.assign(\n        {},\n        DRAWER_STYLE,\n        support.cssanim ? TRANSITION_STYLE : {}\n      )\n    );\n\n    this._resetdrawer();\n\n    Object.keys(this._handler).forEach((name) => {\n      window.addEventListener(name, this._handler[name]);\n    });\n  }\n\n  /**\n   * Destroy drawer.\n   */\n  _destroydrawer() {\n    Object.keys(this._handler).forEach((name) => {\n      window.removeEventListener(name, this._handler[name]);\n    });\n\n    this._resetdrawer(true);\n\n    helper.unsetstyle(\n      this._drawer.element,\n      Object.keys(\n        Object.assign(\n          {},\n          DRAWER_STYLE,\n          support.cssanim ? TRANSITION_STYLE : {}\n        )\n      )\n    );\n  }\n\n  /**\n   * Create overlay.\n   */\n  _createoverlay() {\n    if (this._overlay === false) {\n      return;\n    }\n\n    if (this._overlay.zindex === -1) {\n      this._overlay.zindex = this._drawer.zindex - 1;\n    }\n\n    if (!this._overlay.element) {\n      this._overlay.element = window.document.createElement('div');\n      this._overlay.isautocreated = true;\n\n      helper.setstyle(\n        this._overlay.element,\n        Object.assign(\n          {},\n          OVERLAY_STYLE,\n          support.cssanim ? TRANSITION_STYLE : {}\n        )\n      );\n    }\n\n    if (!this._overlay.touchhandler) {\n      this._overlay.touchhandler = (e) => {\n        this.close();\n      };\n    }\n\n    window.document.body.appendChild(this._overlay.element);\n  }\n\n  /**\n   * Destroy overlay.\n   */\n  _destroyoverlay() {\n    if (this._overlay === false) {\n      return;\n    }\n\n    if (this._overlay.element) {\n      this._overlay.element.removeEventListener('click', this._overlay.touchhandler);\n\n      if (this._overlay.isautocreated) {\n        this._overlay.element.parentNode.removeChild(this._overlay.element);\n      }\n    }\n  }\n\n  /**\n   * Reset drawer.\n   *\n   * @param {boolean} [isunset] Unset style.\n   */\n  _resetdrawer(isunset = false) {\n    try {\n      this._setprops();\n\n      let ims = this._getinitdrawerstyle();\n\n      if (isunset) {\n        helper.unsetstyle(this._drawer.element, Object.keys(ims));\n      } else {\n        helper.setstyle(this._drawer.element, ims);\n      }\n    } catch (e) {\n      if (this._drawer.onerror && typeof this._drawer.onerror === 'function') {\n        this._drawer.onerror.apply(this, [e]);\n      } else {\n        throw e;\n      }\n    }\n  }\n\n  /**\n   * Show drawer.\n   */\n  _showdrawer() {\n    helper.setstyle(this._drawer.element, {\n      zIndex: this._drawer.zindex,\n      opacity: 1,\n    });\n  }\n\n  /**\n   * Hide drawer.\n   */\n  _hidedrawer() {\n    helper.setstyle(this._drawer.element, {\n      zIndex: -1,\n      opacity: 0,\n    });\n  }\n\n  /**\n   * Show overlay.\n   */\n  _showoverlay() {\n    helper.setstyle(this._overlay.element, {\n      zIndex: this._overlay.zindex,\n      display: 'block',\n    });\n  }\n\n  /**\n   * Hide overlay.\n   */\n  _hideoverlay() {\n    helper.setstyle(this._overlay.element, {\n      zIndex: -1,\n      display: 'none',\n    });\n  }\n\n  /**\n   * Set properties.\n   */\n  _setprops() {\n    // set sizepixel\n    let sizepixel = this._normalizepixel(\n      this._drawer.size\n    );\n\n    if (this._drawer.maxsize && this._drawer.maxsize !== -1) {\n      let maxsizepixel = this._normalizepixel(\n        this._drawer.maxsize\n      );\n\n      if (sizepixel > maxsizepixel) {\n        sizepixel = maxsizepixel;\n      }\n    }\n\n    this._sizepixel = sizepixel;\n\n    // set position\n    this._position = typeof this._position === 'undefined' ?\n      null :\n      this._position;\n  }\n\n  /**\n   * Return initial style of drawer.\n   *\n   * @return {Object} Style for drawer.\n   */\n  _getinitdrawerstyle() {\n    let style = null;\n\n    switch (this._drawer.direction) {\n      case 'top':\n        style = {\n          width: '100%',\n          height: `${this._sizepixel}px`,\n          top: `-${this._sizepixel}px`,\n          right: 'auto',\n          bottom: 'auto',\n          left: 0,\n        };\n        break;\n      case 'right':\n        style = {\n          width: `${this._sizepixel}px`,\n          height: '100%',\n          top: 0,\n          right: `-${this._sizepixel}px`,\n          bottom: 'auto',\n          left: 'auto',\n        };\n        break;\n      case 'bottom':\n        style = {\n          width: '100%',\n          height: `${this._sizepixel}px`,\n          top: 'auto',\n          right: 'auto',\n          bottom: `-${this._sizepixel}px`,\n          left: 0,\n        };\n        break;\n      case 'left':\n        style = {\n          width: `${this._sizepixel}px`,\n          height: '100%',\n          top: 0,\n          right: 'auto',\n          bottom: 'auto',\n          left: `-${this._sizepixel}px`,\n        };\n        break;\n      default:\n        throw new Error(`'${this._drawer.direction}' does not support`);\n    }\n\n    return Object.assign(style, this._drawer.style || {});\n  }\n\n  /**\n   * Return style for moving the drawer.\n   *\n   * @param {number} position Moving position.\n   * @param {number} [duration] Drawer moving time.\n   * @return {Object} Move style for drawer.\n   */\n  _getdrawerstyle(position, duration = null) {\n    let minp = this._getminposition(this._drawer);\n    let style = {};\n\n    if (support.cssanim) {\n      style.transitionDuration = `${duration === null ? this._drawer.duration : duration}ms`;\n\n      switch (this._drawer.direction) {\n        case 'top':\n          style.transform = `${support.transrate}(0,${-(minp - position)}px,0)`;\n          break;\n        case 'right':\n          style.transform = `${support.transrate}(${minp - position}px,0,0)`;\n          break;\n        case 'bottom':\n          style.transform = `${support.transrate}(0,${minp - position}px,0)`;\n          break;\n        case 'left':\n          style.transform = `${support.transrate}(${-(minp - position)}px,0,0)`;\n          break;\n        default:\n          throw new Error(`'${this._drawer.direction}' does not support`);\n      }\n    } else {\n      style[this._drawer.direction] = `${position}px`;\n    }\n\n    return style;\n  }\n\n  /**\n   * Return style for moving the overlay.\n   *\n   * @param {float} opacity Overlay opacity.\n   * @param {number} [duration] Drawer moving time.\n   * @return {Object} Move style for overlay.\n   */\n  _getoverlaystyle(opacity, duration = null) {\n    let style = {\n      opacity,\n    };\n\n    if (support.cssanim) {\n      style.transitionDuration = `${duration === null ? this._drawer.duration : duration}ms`;\n    }\n\n    return style;\n  }\n\n  /**\n   * Make animation with CSS3.\n   *\n   * @param {number} duration Drawer moving time.\n   */\n  _cssanimate(duration) {\n    helper.setstyle(\n      this._overlay.element,\n      this._getoverlaystyle(\n        this._getoverlayopacityfromposition(this._position),\n        duration\n      )\n    );\n\n    helper.setstyle(\n      this._drawer.element,\n      this._getdrawerstyle(this._position, duration)\n    );\n  }\n\n  /**\n   * Make animation with Javascript.\n   *\n   * @param {number} duration Drawer moving time.\n   */\n  _jsanimate(duration) {\n    let start = +new Date();\n    let fromopy = this._getoverlayopacityfromstyle();\n    let toopy = this._getoverlayopacityfromposition(this._position);\n    let frompos = this._getdrawerpositionfromstyle();\n    let topos = this._position;\n\n    if (this._intervalid) {\n      clearInterval(this._intervalid);\n    }\n\n    this._intervalid = setInterval(() => {\n      let time = new Date() - start;\n      let nowpos = null;\n      let nowopy = null;\n\n      if (time > duration) {\n        clearInterval(this._intervalid);\n        this._intervalid = null;\n        nowopy = toopy;\n        nowpos = topos;\n      } else {\n        let prp = (time /= duration) * (time - 2);\n        nowopy = fromopy - ((toopy - fromopy) * prp);\n        nowpos = frompos - ((topos - frompos) * prp);\n      }\n\n      helper.setstyle(\n        this._overlay.element,\n        this._getoverlaystyle(nowopy, duration)\n      );\n\n      helper.setstyle(\n        this._drawer.element,\n        this._getdrawerstyle(nowpos, duration)\n      );\n    }, 10);\n  }\n\n  /**\n   * Return state by touch movement.\n   *\n   * @return {string} State by touch movement.\n   */\n  _gettouchmovestate() {\n    if (this._process.time.end - this._process.time.start <= 300) {\n      let len = this._process.touches.length;\n      let moveinfo = this._gettouchmoveinfo(\n        this._process.touches[len - 2],\n        this._process.touches[len - 1]\n      );\n      let vertical = moveinfo.axis === 'vertical';\n      let horizontal = moveinfo.axis === 'horizontal';\n      let top = this._drawer.direction === 'top' && moveinfo.y >= 0;\n      let right = this._drawer.direction === 'right' && moveinfo.x < 0;\n      let bottom = this._drawer.direction === 'bottom' && moveinfo.y < 0;\n      let left = this._drawer.direction === 'left' && moveinfo.x >= 0;\n\n      return (vertical && (bottom || top)) ||\n        (horizontal && (right || left)) ?\n        'open' :\n        'close';\n    }\n\n    return this._getstatefromposition();\n  }\n\n  /**\n   * Return drawer event handler.\n   *\n   * @return {Object} Drawer event handler.\n   */\n  _getdrawerhandler() {\n    let handler = {};\n\n    handler.resize = () => {\n      this._resetdrawer();\n      this[this.state](0, false, false);\n\n      if (this._drawer.onresize) {\n        this._drawer.onresize.apply(\n          this,\n          [this._drawer]\n        );\n      }\n    };\n\n    if (this._drawer.swipeable) {\n      for (let event of TOUCH_EVENTS) {\n        handler[event] = this._touchhandler.bind(this);\n      }\n    }\n\n    if (window.history\n      && window.history.pushState\n      && this._drawer.history\n    ) {\n      handler.popstate = (e) => {\n        if (e.state && e.state.id === this._id && this.state === 'open') {\n          this.close(null, true, false);\n        }\n      };\n    }\n\n    return handler;\n  }\n\n  /**\n   * Touch event handler.\n   *\n   * @param {Event} ev Touch event object.\n   * @return {boolean} Event bubbling.\n   */\n  _touchhandler(ev) {\n    try {\n      if (ev.touches.length > 1) {\n        return true;\n      }\n\n      let touch = ev.touches[0];\n\n      if (touch) {\n        this._process.touches.push(touch);\n      }\n\n      switch (ev.type) {\n        case 'touchstart':\n          this._ontouchstart(ev);\n          break;\n        case 'touchmove':\n          this._ontouchmove(ev);\n          break;\n        case 'touchcancel':\n        case 'touchend':\n          this._ontouchfinish(ev);\n          break;\n        default:\n          break;\n      }\n    } catch (e) {\n      if (this._drawer.onerror && typeof this._drawer.onerror === 'function') {\n        this._drawer.onerror.apply(this, [e]);\n      } else {\n        throw e;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Touch start event handler.\n   *\n   * @param {Event} ev Touch event object.\n   */\n  _ontouchstart(ev) {\n    this._process.time.start = new Date().getTime();\n  }\n\n  /**\n   * Touch move event handler.\n   *\n   * @param {Event} ev Touch event object.\n   */\n  _ontouchmove(ev) {\n    let len = this._process.touches.length;\n\n    if (len < 2) {\n      return;\n    }\n\n    if (!this._process.istouchpointactive) {\n      this._process.istouchpointactive = this._istouchpointactive();\n    }\n\n    if (!this._process.istouchpointactive) {\n      return;\n    }\n\n    if (this._process.istouchdirectionactive === null) {\n      this._process.istouchdirectionactive = this._istouchdirectionactive();\n    }\n\n    if (!this._process.istouchdirectionactive) {\n      return;\n    }\n\n    let isfiretouchstart = false;\n    let istouchactive = this._process.istouchpointactive &&\n        this._process.istouchdirectionactive;\n\n    if (!istouchactive) {\n      return;\n    }\n\n    if (!this._process.istouchactive) {\n      this._process.istouchactive = istouchactive;\n      this._showoverlay();\n      this._showdrawer();\n\n      if (this._drawer.ontouchstart) {\n        isfiretouchstart = true;\n      }\n    }\n\n    ev.stopPropagation();\n    ev.preventDefault();\n\n    this._position = this._getdrawerpositionfromtouches(\n      this._process.touches[len - 2],\n      this._process.touches[len - 1]\n    );\n\n    if (isfiretouchstart) {\n      this._drawer.ontouchstart.apply(\n        this,\n        [this._drawer, this._position]\n      );\n    }\n\n    helper.setstyle(\n      this._overlay.element,\n      this._getoverlaystyle(\n        this._getoverlayopacityfromposition(this._position),\n        0\n      )\n    );\n\n    helper.setstyle(\n      this._drawer.element,\n      this._getdrawerstyle(this._position, 0)\n    );\n\n    if (this._drawer.ontouchmove) {\n      this._drawer.ontouchmove.apply(\n        this,\n        [this._drawer, this._position]\n      );\n    }\n  }\n\n  /**\n   * Touch finish event handler.\n   *\n   * @param {Event} ev Touch event object.\n   */\n  _ontouchfinish(ev) {\n    let len = this._process.touches.length;\n\n    if (this._process.istouchactive && len >= 2) {\n      this._process.time.end = new Date().getTime();\n\n      let state = this._gettouchmovestate();\n      let changestate = this.state !== state;\n\n      this[state](null, changestate, changestate);\n\n      if (this._drawer.ontouchfinish) {\n        this._drawer.ontouchfinish.apply(\n          this,\n          [\n            this._drawer,\n            this._getdrawerpositionfromtouches(\n              this._process.touches[len - 2],\n              this._process.touches[len - 1]\n            ),\n          ]\n        );\n      }\n    }\n\n    this._process.touches = [];\n    this._process.istouchactive = null;\n    this._process.istouchpointactive = null;\n    this._process.istouchdirectionactive = null;\n    this._process.time.start = 0;\n    this._process.time.end = 0;\n  }\n\n  /**\n   * Return whether or not a valid touch.\n   *\n   * @param {number} position Moving position.\n   * @param {number} [duration=null] Drawer moving time.\n   * @param {Object} [callbacks=null] Callback objects.\n   * @param {boolean} [ischangehistory=false] Make a change in history.\n   * @return {Promise} Promise object.\n   */\n  _changestate(\n    position,\n    duration = null,\n    callbacks = null,\n    ischangehistory = true\n  ) {\n    return this._handlecallback(new Promise((resolve, reject) => {\n      try {\n        if (!this._enabled) {\n          throw new Error('Drawer is disabled.');\n        }\n\n        this._position = position;\n\n        let du = duration === null ? this._drawer.duration : duration;\n\n        if (this._timeoutid !== null) {\n          clearTimeout(this._timeoutid);\n          this._timeoutid = null;\n        }\n\n        let state = this._getstatefromposition();\n\n        if (state === 'open') {\n          this._showoverlay();\n          this._showdrawer();\n        } else {\n          this._overlay.element.removeEventListener('click', this._overlay.touchhandler);\n        }\n\n        if (ischangehistory\n          && this._drawer.history\n          && window.history\n          && window.history.pushState\n        ) {\n          if (state === 'open') {\n            window.history.pushState({\n              id: this._id,\n            }, null, null);\n          } else {\n            window.history.back();\n          }\n        }\n\n        this[support.cssanim\n          ? '_cssanimate'\n          : '_jsanimate'](du);\n\n        this._timeoutid = setTimeout(\n          () => {\n            if (state === 'open') {\n              this._overlay.element.addEventListener('click', this._overlay.touchhandler);\n            } else {\n              this._hidedrawer();\n              this._hideoverlay();\n            }\n\n            this._timeoutid = null;\n          },\n          du\n        );\n\n        this.state = state;\n\n        if (typeof callbacks === 'object' && callbacks.onchangestate) {\n          callbacks.onchangestate.apply(\n            this,\n            [this._drawer, state]\n          );\n        }\n\n        resolve.apply(this, [this._drawer]);\n      } catch (e) {\n        reject(e);\n      }\n    }), {\n      done: typeof callbacks === 'object' && callbacks.done ? callbacks.done : null,\n      fail: typeof callbacks === 'object' && callbacks.fail ? callbacks.fail : null,\n    });\n  }\n\n  /**\n   * Return whether or not a valid touch point.\n   *\n   * @return {boolean} Result of valid touch point.\n   */\n  _istouchpointactive() {\n    let rg = this._getrange(\n      this.state === 'open' ?\n        this._sizepixel :\n        this._drawer.swipearea\n    );\n    let len = this._process.touches.length;\n\n    return (rg.from.x <= this._process.touches[len - 2].clientX &&\n      this._process.touches[len - 2].clientX <= rg.to.x &&\n      rg.from.y <= this._process.touches[len - 2].clientY &&\n      this._process.touches[len - 2].clientY <= rg.to.y);\n  }\n\n  /**\n   * Return whether or not a valid touch direction.\n   *\n   * @return {boolean} Result of valid touch direction.\n   */\n  _istouchdirectionactive() {\n    let len = this._process.touches.length;\n    let moveinfo = this._gettouchmoveinfo(\n      this._process.touches[len - 2],\n      this._process.touches[len - 1]\n    );\n    let vertical = moveinfo.axis === 'vertical';\n    let horizontal = moveinfo.axis === 'horizontal';\n\n    if (!(vertical &&\n      (this._drawer.direction === 'top' ||\n      this._drawer.direction === 'bottom') ||\n      horizontal &&\n      (this._drawer.direction === 'right' ||\n      this._drawer.direction === 'left'))\n    ) {\n      return false;\n    }\n\n    return (\n      (\n        this.state === 'open' &&\n        (\n          this._drawer.direction === 'top' && moveinfo.y < 0 ||\n          this._drawer.direction === 'right' && moveinfo.x >= 0 ||\n          this._drawer.direction === 'bottom' && moveinfo.y >= 0 ||\n          this._drawer.direction === 'left' && moveinfo.x < 0\n        )\n      ) ||\n      (\n        this.state === 'close' &&\n        (\n          this._drawer.direction === 'top' && moveinfo.y >= 0 ||\n          this._drawer.direction === 'right' && moveinfo.x < 0 ||\n          this._drawer.direction === 'bottom' && moveinfo.y < 0 ||\n          this._drawer.direction === 'left' && moveinfo.x >= 0\n        )\n      )\n    );\n  }\n\n  /**\n   * Return the state of the drawer.\n   *\n   * @return {string} State of the drawer.\n   */\n  _getstatefromposition() {\n    let pos = this._position === null ?\n      this._getdrawerpositionfromstyle() :\n      this._position;\n\n    return Math.abs(pos) < this._sizepixel / 2 ?\n      'open' :\n      'close';\n  }\n\n  /**\n   * Return the position of the drawer.\n   *\n   * @param {Object} touchbasis Basic touch information.\n   * @param {Object} touchlast Last touch information.\n   * @return {number} Position of the drawer.\n   */\n  _getdrawerpositionfromtouches(touchbasis, touchlast) {\n    let distance = this._getdistance(\n      this._gettouchmoveinfo(touchbasis, touchlast)\n    );\n\n    let curpos = this._position === null ?\n      this._getdrawerpositionfromstyle() :\n      this._position;\n\n    let pos = Math.round(curpos + distance);\n    let minp = this._getminposition(this._drawer);\n\n    if (pos > 0) {\n      pos = 0;\n    } else if (pos < minp) {\n      pos = minp;\n    }\n\n    return pos;\n  }\n\n  /**\n   * Return the position in the style.\n   *\n   * @return {number} Position in the style.\n   */\n  _getdrawerpositionfromstyle() {\n    let value = this._drawer.element.style[this._drawer.direction];\n    return this._normalizenumber(value).value;\n  }\n\n\n  /**\n   * Return the opacity of the overlay.\n   *\n   * @param {number} position Moving position.\n   * @return {number} Position of the drawer.\n   */\n  _getoverlayopacityfromposition(position) {\n    let minp = this._getminposition(this._drawer);\n    let posratio = 1 - (Math.abs(position) / Math.abs(minp));\n    return ((this._overlay.opacity * posratio) * 10000) / 10000;\n  }\n\n  /**\n   * Return the opacity in the style.\n   *\n   * @return {number} Opacity in the style.\n   */\n  _getoverlayopacityfromstyle() {\n    return parseFloat(this._overlay.element.style.opacity);\n  }\n\n  /**\n   * Return the swipe range.\n   *\n   * @param {string|number} value Target swipe area value.\n   * @return {Object} Drag range.\n   * @throws {Error} Is thrown if direction value is invalid.\n   */\n  _getrange(value) {\n    let basis = this._convertpixelabs(value);\n    let width = window.innerWidth;\n    let height = window.innerHeight;\n\n    switch (this._drawer.direction) {\n      case 'top':\n        return {from: {x: 0, y: 0}, to: {x: width, y: basis}};\n      case 'right':\n        return {from: {x: basis, y: 0}, to: {x: width, y: height}};\n      case 'bottom':\n        return {from: {x: 0, y: basis}, to: {x: width, y: height}};\n      case 'left':\n        return {from: {x: 0, y: 0}, to: {x: basis, y: height}};\n      default:\n        throw new Error(`'${this._drawer.direction}' does not support`);\n    }\n  }\n\n  /**\n   * Return a value converted to the absolute value of the pixel.\n   *\n   * @param {string|number} value Target value.\n   * @return {number} Converted to the absolute value of the pixel.\n   * @throws {Error} Is thrown if direction value is invalid.\n   */\n  _convertpixelabs(value) {\n    let nvalue = this._normalizepixel(value);\n\n    switch (this._drawer.direction) {\n      case 'top':\n      case 'left':\n        return nvalue;\n      case 'right':\n        return window.innerWidth - nvalue;\n      case 'bottom':\n        return window.innerHeight - nvalue;\n      default:\n        throw new Error(`'${this._drawer.direction}' does not support`);\n    }\n  }\n\n  /**\n   * Return the normalized pixel value.\n   *\n   * @param {string|number} value Target value.\n   * @return {number} Normalized pixel value.\n   * @throws {Error} Is thrown if direction value is invalid.\n   */\n  _normalizepixel(value) {\n    let normalized = this._normalizenumber(value);\n\n    if (normalized.unit === 'number' || normalized.unit === 'pixel') {\n      return normalized.value;\n    } else if (normalized.unit === 'percent') {\n      switch (this._drawer.direction) {\n        case 'top':\n        case 'bottom':\n          return window.innerHeight * (normalized.value / 100);\n        case 'right':\n        case 'left':\n          return window.innerWidth * (normalized.value / 100);\n        default:\n          throw new Error(`'${this._drawer.direction}' does not support`);\n      }\n    }\n  }\n\n  /**\n   * Return the numeric normalized information.\n   *\n   * @param {string|number} value Target value.\n   * @return {Object} Numeric normalized information.\n   * @throws {Error} Is thrown if value is invalid.\n   */\n  _normalizenumber(value) {\n    if (typeof value === 'number') {\n      return {value: value, unit: 'number'};\n    } else if (String(value).match(/^[.\\-0-9]+$/)) {\n      return {value: Number(value), unit: 'number'};\n    } else if (value.match(/^[.\\-0-9]+px$/)) {\n      return {value: Number(value.replace(/px$/ig, '')), unit: 'pixel'};\n    } else if (value.match(/[.\\-0-9]+%$/)) {\n      return {value: Number(value.replace(/%$/ig, '')), unit: 'percent'};\n    }\n\n    throw new Error(`'${value}' does not support`);\n  }\n\n  /**\n   * Return to the minimum position for the drawer.\n   *\n   * @return {number} Minimum position for the drawer.\n   * @throws {Error} Is thrown if direction value is invalid.\n   */\n  _getminposition() {\n    switch (this._drawer.direction) {\n      case 'top':\n      case 'bottom':\n        return -1 * this._drawer.element.offsetHeight;\n      case 'right':\n      case 'left':\n        return -1 * this._drawer.element.offsetWidth;\n      default:\n        throw new Error(`'${this._drawer.direction}' does not support`);\n    }\n  }\n\n  /**\n   * Return the distance of the drawer.\n   *\n   * @param {Object} moveinfo Movement information of the drawer.\n   * @return {number} Distance of the drawer.\n   * @throws {Error} Is thrown if direction value is invalid.\n   */\n  _getdistance(moveinfo) {\n    switch (this._drawer.direction) {\n      case 'top':\n        return moveinfo.y;\n      case 'right':\n        return -1 * moveinfo.x;\n      case 'bottom':\n        return -1 * moveinfo.y;\n      case 'left':\n        return moveinfo.x;\n      default:\n        throw new Error(`'${this._drawer.direction}' does not support`);\n    }\n  }\n\n  /**\n   * Return the information of touch move.\n   *\n   * @param {Object} touchbasis Basic touch information.\n   * @param {Object} touchlast Last touch information.\n   * @return {Object} Movement distance of the x, y direction, movement direction.\n   */\n  _gettouchmoveinfo(touchbasis, touchlast) {\n    let x = touchlast.clientX - touchbasis.clientX;\n    let y = touchlast.clientY - touchbasis.clientY;\n    let axis = Math.abs(x) >= Math.abs(y) ? 'horizontal' : 'vertical';\n\n    return {x, y, axis};\n  }\n\n  /**\n   * Validate HTMLElement\n   *\n   * @param {*} obj HTMLElement to be verified.\n   * @return {boolean} Result of valid HTMLElement.\n   */\n  _isHTMLElement(obj) {\n    try {\n      return obj instanceof HTMLElement;\n    } catch (e) {\n      return (typeof obj === 'object') &&\n        (obj.nodeType === 1) &&\n        (typeof obj.style === 'object') &&\n        (typeof obj.ownerDocument === 'object');\n    }\n  }\n\n  /**\n   * Return the information of touch move.\n   *\n   * @param {Promise} promise Promise instance.\n   * @param {Object} callbacks Callback function with the key to 'done', 'fail', 'always' (each optional).\n   * @return {Promise} Promise instance.\n   */\n  _handlecallback(promise, callbacks) {\n    if (!callbacks) {\n      return promise;\n    }\n\n    for (let key of Object.keys(callbacks)) {\n      let callback = callbacks[key];\n\n      if (!callback) {\n        continue;\n      }\n\n      let cb = isarray(callback) ? callback : [callback];\n      let rcb = null;\n\n      switch (key) {\n        case 'done':\n          rcb = (prom, value) => prom.then(value.bind(this));\n          break;\n        case 'fail':\n          rcb = (prom, value) => prom.catch(value.bind(this));\n          break;\n        case 'always':\n          rcb = (prom, value) => prom.then(value.bind(this), value.bind(this));\n          break;\n        default:\n          break;\n      }\n\n      if (rcb) {\n        cb.reduce(rcb, promise);\n      }\n    }\n\n    return promise;\n  }\n}\n\nmodule.exports = Highendrawer;\n"],"sourceRoot":""}