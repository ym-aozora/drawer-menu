/*!
 * highendrawer - Highendrawer provides javascript and css drawers to your website and applications.
 * @version v0.0.1
 * @link https://github.com/ym-aozora/highendrawer#readme
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Highendrawer=t():e.Highendrawer=t()}(this,function(){return function(e){function t(i){if(r[i])return r[i].exports;var o=r[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=r(1),h=r(3),u=r(2),c=i(u),d=r(4),_=function(){function e(t){var r=this;o(this,e),this.state="close",this._id=c.generateid(),this._drawer=s({},l.DEFAULT_DRAWER_PROPERTY,t),this._overlay=this._drawer.overlay!==!1&&s({},l.DEFAULT_OVERLAY_PROPERTY,this._drawer.overlay),this._timeoutid=null,this._intervalid=null,this._process=s({},l.DEFAULT_PROCESS),this._enabled=!1,this._handler=this._getdrawerhandler(),this._drawer.enabledmaxwidth>-1&&window.addEventListener("resize",function(){r._enabled&&window.innerWidth>r._drawer.enabledmaxwidth?r.destroy():!r._enabled&&window.innerWidth<=r._drawer.enabledmaxwidth&&r.create()}),this._drawer.isinitcreate&&this.create()}return a(e,[{key:"create",value:function(){try{this._createdrawer(),this._createoverlay(),this._enabled=!0,this._drawer.oncreate&&this._drawer.oncreate.apply(this,[this._drawer])}catch(e){if(!this._drawer||!this._drawer.onerror||"function"!=typeof this._drawer.onerror)throw e;this._drawer.onerror.apply(this,[e])}}},{key:"destroy",value:function(){try{this._destroydrawer(),this._destroyoverlay(),this._enabled=!1,this._drawer.ondestroy&&this._drawer.ondestroy.apply(this,[this._drawer])}catch(e){if(!this._drawer||!this._drawer.onerror||"function"!=typeof this._drawer.onerror)throw e;this._drawer.onerror.apply(this,[e])}}},{key:"open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this._changestate(0,e,{onchangestate:t?this._drawer.onchangestate:null,done:t?this._drawer.onopen:null,fail:t?this._drawer.onerror:null},r)}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this._changestate(this._getminposition(),e,{onchangestate:t?this._drawer.onchangestate:null,done:t?this._drawer.onclose:null,fail:t?this._drawer.onerror:null},r)}},{key:"toggle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise(function(o,n){try{t["open"===t.state?"close":"open"](e,r,i).then(o,n)}catch(e){n(e)}})}},{key:"_createdrawer",value:function(){var e=this;c.setstyle(this._drawer.element,s({},l.DRAWER_STYLE,d.support.cssanim?l.TRANSITION_STYLE:{})),this._resetdrawer(),Object.keys(this._handler).forEach(function(t){window.addEventListener(t,e._handler[t])})}},{key:"_destroydrawer",value:function(){var e=this;Object.keys(this._handler).forEach(function(t){window.removeEventListener(t,e._handler[t])}),this._resetdrawer(!0),c.unsetstyle(this._drawer.element,Object.keys(s({},l.DRAWER_STYLE,d.support.cssanim?l.TRANSITION_STYLE:{})))}},{key:"_createoverlay",value:function(){var e=this;this._overlay!==!1&&(this._overlay.zindex===-1&&(this._overlay.zindex=this._drawer.zindex-1),this._overlay.element||(this._overlay.element=window.document.createElement("div"),this._overlay.isautocreated=!0,c.setstyle(this._overlay.element,s({},l.OVERLAY_STYLE,d.support.cssanim?l.TRANSITION_STYLE:{}))),this._overlay.touchhandler||(this._overlay.touchhandler=function(t){e.close()}),this._overlay.element.addEventListener("click",this._overlay.touchhandler),window.document.body.appendChild(this._overlay.element))}},{key:"_destroyoverlay",value:function(){this._overlay!==!1&&this._overlay.element&&(this._overlay.touchhandler&&this._overlay.element.removeEventListener("click",this._overlay.touchhandler),this._overlay.isautocreated&&this._overlay.element.parentNode.removeChild(this._overlay.element))}},{key:"_resetdrawer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{this._setprops();var t=this._getinitdrawerstyle();e?c.unsetstyle(this._drawer.element,Object.keys(t)):c.setstyle(this._drawer.element,t)}catch(e){if(!this._drawer.onerror||"function"!=typeof this._drawer.onerror)throw e;this._drawer.onerror.apply(this,[e])}}},{key:"_showdrawer",value:function(){c.setstyle(this._drawer.element,{zIndex:this._drawer.zindex})}},{key:"_hidedrawer",value:function(){c.setstyle(this._drawer.element,{zIndex:-1})}},{key:"_showoverlay",value:function(){c.setstyle(this._overlay.element,{zIndex:this._overlay.zindex,display:"block"})}},{key:"_hideoverlay",value:function(){c.setstyle(this._overlay.element,{zIndex:-1,display:"none"})}},{key:"_setprops",value:function(){var e=this._normalizepixel(this._drawer.size),t=this._normalizepixel(this._drawer.maxsize);e>t&&(e=t),this._sizepixel=e,this._position="undefined"==typeof this._position?null:this._position}},{key:"_getinitdrawerstyle",value:function(){var e=null;switch(this._drawer.direction){case"top":e={width:"100%",height:this._sizepixel+"px",top:"-"+this._sizepixel+"px",right:"auto",bottom:"auto",left:0};break;case"right":e={width:this._sizepixel+"px",height:"100%",top:0,right:"-"+this._sizepixel+"px",bottom:"auto",left:"auto"};break;case"bottom":e={width:"100%",height:this._sizepixel+"px",top:"auto",right:"auto",bottom:"-"+this._sizepixel+"px",left:0};break;case"left":e={width:this._sizepixel+"px",height:"100%",top:0,right:"auto",bottom:"auto",left:"-"+this._sizepixel+"px"};break;default:throw new Error("'"+this._drawer.direction+"' does not support")}return s(e,this._drawer.style||{})}},{key:"_getdrawerstyle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this._getminposition(this._drawer),i={};if(d.support.cssanim)switch(i.transitionDuration=(null===t?this._drawer.duration:t)+"ms",this._drawer.direction){case"top":i.transform=d.support.transrate+"(0,"+-(r-e)+"px,0)";break;case"right":i.transform=d.support.transrate+"("+(r-e)+"px,0,0)";break;case"bottom":i.transform=d.support.transrate+"(0,"+(r-e)+"px,0)";break;case"left":i.transform=d.support.transrate+"("+-(r-e)+"px,0,0)";break;default:throw new Error("'"+this._drawer.direction+"' does not support")}else i[this._drawer.direction]=e+"px";return i}},{key:"_getoverlaystyle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={opacity:e};return d.support.cssanim&&(r.transitionDuration=(null===t?this._drawer.duration:t)+"ms"),r}},{key:"_cssanimate",value:function(e){c.setstyle(this._overlay.element,this._getoverlaystyle(this._getoverlayopacityfromposition(this._position),e)),c.setstyle(this._drawer.element,this._getdrawerstyle(this._position,e))}},{key:"_jsanimate",value:function(e){var t=this,r=+new Date,i=this._getoverlayopacityfromstyle(),o=this._getoverlayopacityfromposition(this._position),n=this._getdrawerpositionfromstyle(),s=this._position;this._intervalid&&clearInterval(this._intervalid),this._intervalid=setInterval(function(){var a=new Date-r,l=null,h=null;if(a>e)clearInterval(t._intervalid),t._intervalid=null,h=o,l=s;else{var u=(a/=e)*(a-2);h=i-(o-i)*u,l=n-(s-n)*u}c.setstyle(t._overlay.element,t._getoverlaystyle(h,e)),c.setstyle(t._drawer.element,t._getdrawerstyle(l,e))},10)}},{key:"_gettouchmovestate",value:function(e,t){if(t.end-t.start<=300){var r=e.length;if(r>=2){var i=this._gettouchmoveinfo(e[r-2],e[r-1]),o="horizontal"===i.axis,n="vertical"===i.axis,s="top"===this._drawer.direction&&i.y>=0,a="right"===this._drawer.direction&&i.x<0,l="bottom"===this._drawer.direction&&i.y<0,h="left"===this._drawer.direction&&i.x>=0;return o&&(a||h)||n&&(l||s)?"open":"close"}}return this._getstatefromposition()}},{key:"_getdrawerhandler",value:function(){var e=this,t={};if(t.resize=function(){e._resetdrawer(),e[e.state](0,!1,!1),e._drawer.onresize&&e._drawer.onresize.apply(e,[e._drawer])},this._drawer.isswipeable){var r=!0,i=!1,o=void 0;try{for(var n,s=l.TOUCH_EVENTS[Symbol.iterator]();!(r=(n=s.next()).done);r=!0){var a=n.value;t[a]=this._touchhandler.bind(this)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}return window.history&&window.history.pushState&&this._drawer.ishistory&&(t.popstate=function(t){t.state&&t.state.id===e._id&&"open"===e.state&&e.close(null,!0,!1)}),t}},{key:"_touchhandler",value:function(e){try{if(e.touches.length>1)return!0;var t=e.touches[0];switch(t&&this._process.touches.push(t),e.type){case"touchstart":this._ontouchstart(e);break;case"touchmove":this._ontouchmove(e);break;case"touchcancel":case"touchend":this._ontouchfinish(e)}}catch(e){if(!this._drawer.onerror||"function"!=typeof this._drawer.onerror)throw e;this._drawer.onerror.apply(this,[e])}return!0}},{key:"_ontouchstart",value:function(e){this._process.time.start=(new Date).getTime()}},{key:"_ontouchmove",value:function(e){var t=this._process.touches.length,r=!1;!this._process.istouchactive&&t>=2&&(this._process.istouchactive=this._istouchactive(this._process.touches[0]),this._process.istouchactive&&(this._showoverlay(),this._showdrawer(),this._drawer.ontouchstart&&(r=!0))),this._process.istouchactive&&(e.stopPropagation(),e.preventDefault(),this._position=this._getdrawerpositionfromtouches(this._process.touches[t-2],this._process.touches[t-1]),r&&this._drawer.ontouchstart.apply(this,[this._drawer,this._position]),c.setstyle(this._overlay.element,this._getoverlaystyle(this._getoverlayopacityfromposition(this._position),0)),c.setstyle(this._drawer.element,this._getdrawerstyle(this._position,0)),this._drawer.ontouchmove&&this._drawer.ontouchmove.apply(this,[this._drawer,this._position]))}},{key:"_ontouchfinish",value:function(e){var t=this._process.touches.length;if(this._process.istouchactive&&t>=2){this._process.time.end=(new Date).getTime();var r=this._gettouchmovestate(this._process.touches,this._process.time),i=this.state!==r;this[r](null,i,i),this._drawer.ontouchfinish&&this._drawer.ontouchfinish.apply(this,[this._drawer,this._getdrawerpositionfromtouches(this._process.touches[t-2],this._process.touches[t-1])])}this._process.touches=[],this._process.istouchactive=!1,this._process.time.start=0,this._process.time.end=0}},{key:"_changestate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this._handlecallback(new Promise(function(s,a){try{!function(){r._position=e;var a=null===t?r._drawer.duration:t;null!==r._timeoutid&&(clearTimeout(r._timeoutid),r._timeoutid=null);var l=r._getstatefromposition();"open"===l&&(r._showoverlay(),r._showdrawer()),o&&r._drawer.ishistory&&window.history&&window.history.pushState&&("open"===l?window.history.pushState({id:r._id},null,null):window.history.back()),r[d.support.cssanim?"_cssanimate":"_jsanimate"](a),r._timeoutid=setTimeout(function(){"close"===l&&(r._hidedrawer(),r._hideoverlay()),r._timeoutid=null},a),r.state=l,"object"===("undefined"==typeof i?"undefined":n(i))&&i.onchangestate&&i.onchangestate.apply(r,[r._drawer,l]),s.apply(r,[r._drawer])}()}catch(e){a(e)}}),{done:"object"===("undefined"==typeof i?"undefined":n(i))&&i.done?i.done:null,fail:"object"===("undefined"==typeof i?"undefined":n(i))&&i.fail?i.fail:null})}},{key:"_istouchactive",value:function(e){var t=this._getrange("open"===this.state?"100%":this._drawer.swipearea);return t.from.x<=e.clientX&&e.clientX<=t.to.x&&t.from.y<=e.clientY&&e.clientY<=t.to.y}},{key:"_getstatefromposition",value:function(){var e=null===this._position?this._getdrawerpositionfromstyle():this._position;return Math.abs(e)<this._sizepixel/2?"open":"close"}},{key:"_getdrawerpositionfromtouches",value:function(e,t){var r=this._getdistance(this._gettouchmoveinfo(e,t)),i=null===this._position?this._getdrawerpositionfromstyle():this._position,o=Math.round(i+r),n=this._getminposition(this._drawer);return o>0?o=0:o<n&&(o=n),o}},{key:"_getdrawerpositionfromstyle",value:function(){var e=this._drawer.element.style[this._drawer.direction];return this._normalizenumber(e).value}},{key:"_getoverlayopacityfromposition",value:function(e){var t=this._getminposition(this._drawer),r=1-Math.abs(e)/Math.abs(t);return this._overlay.opacity*r*1e4/1e4}},{key:"_getoverlayopacityfromstyle",value:function(){return parseFloat(this._overlay.element.style.opacity)}},{key:"_getrange",value:function(e){var t=this._convertpixelabs(e),r=window.innerWidth,i=window.innerHeight;switch(this._drawer.direction){case"top":return{from:{x:0,y:0},to:{x:r,y:t}};case"right":return{from:{x:t,y:0},to:{x:r,y:i}};case"bottom":return{from:{x:0,y:t},to:{x:r,y:i}};case"left":return{from:{x:0,y:0},to:{x:t,y:i}};default:throw new Error("'"+this._drawer.direction+"' does not support")}}},{key:"_convertpixelabs",value:function(e){var t=this._normalizepixel(e);switch(this._drawer.direction){case"top":case"left":return t;case"right":return window.innerWidth-t;case"bottom":return window.innerHeight-t;default:throw new Error("'"+this._drawer.direction+"' does not support")}}},{key:"_normalizepixel",value:function(e){var t=this._normalizenumber(e);if("number"===t.unit||"pixel"===t.unit)return t.value;if("percent"===t.unit)switch(this._drawer.direction){case"top":case"bottom":return window.innerHeight*(t.value/100);case"right":case"left":return window.innerWidth*(t.value/100);default:throw new Error("'"+this._drawer.direction+"' does not support")}}},{key:"_normalizenumber",value:function(e){if("number"==typeof e)return{value:e,unit:"number"};if(String(e).match(/^[.\-0-9]+$/))return{value:Number(e),unit:"number"};if(e.match(/^[.\-0-9]+px$/))return{value:Number(e.replace(/px$/gi,"")),unit:"pixel"};if(e.match(/[.\-0-9]+%$/))return{value:Number(e.replace(/%$/gi,"")),unit:"percent"};throw new Error("'"+e+"' does not support")}},{key:"_getminposition",value:function(){switch(this._drawer.direction){case"top":case"bottom":return-1*this._drawer.element.offsetHeight;case"right":case"left":return-1*this._drawer.element.offsetWidth;default:throw new Error("'"+this._drawer.direction+"' does not support")}}},{key:"_getdistance",value:function(e){switch(this._drawer.direction){case"top":return e.y;case"right":return-1*e.x;case"bottom":return-1*e.y;case"left":return e.x;default:throw new Error("'"+this._drawer.direction+"' does not support")}}},{key:"_gettouchmoveinfo",value:function(e,t){var r=t.clientX-e.clientX,i=t.clientY-e.clientY,o=Math.abs(r)>=Math.abs(i)?"horizontal":"vertical";return{x:r,y:i,axis:o}}},{key:"_handlecallback",value:function(e,t){var r=this;if(!t)return e;var i=!0,o=!1,n=void 0;try{for(var s,a=Object.keys(t)[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value,u=t[l];if(u){var c=(0,h.isarray)(u)?u:[u],d=null;switch(l){case"done":d=function(e,t){return e.then(t.bind(r))};break;case"fail":d=function(e,t){return e.catch(t.bind(r))};break;case"always":d=function(e,t){return e.then(t.bind(r),t.bind(r))}}d&&c.reduce(d,e)}}}catch(e){o=!0,n=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw n}}return e}}]),e}();t.default=_,e.exports=_},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PREFIX=["webkit","moz","o","ms"],t.DRAWER_STYLE=Object.freeze({display:"block",position:"fixed",overflowX:"hidden",overflowY:"auto",zIndex:-1,webkitOverflowScrolling:"touch"}),t.OVERLAY_STYLE=Object.freeze({display:"none",backgroundColor:"#000",position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:-1,opacity:0}),t.TRANSITION_STYLE=Object.freeze({transform:"",transitionProperty:"transform,opacity",transitionTimingFunction:"cubic-bezier(0,0,0.25,1)",transitionDuration:"0ms"}),t.DEFAULT_DRAWER_PROPERTY=Object.freeze({element:null,direction:"right",size:"80%",maxsize:256,isswipeable:!0,swipearea:"8%",duration:300,zindex:9999,style:{},isinitcreate:!0,enabledmaxwidth:-1,ishistory:!0,overlay:null,oncreate:null,ondestroy:null,onopen:null,onclose:null,onchangestate:null,onresize:null,ontouchstart:null,ontouchmove:null,ontouchfinish:null,onerror:null}),t.DEFAULT_OVERLAY_PROPERTY=Object.freeze({element:null,opacity:.2,zindex:-1,autocreate:!1}),t.DEFAULT_PROCESS=Object.freeze({touches:[],istouchactive:!1,time:{start:0,end:0}}),t.TOUCH_EVENTS=["touchstart","touchmove","touchend","touchcancel"]},function(e,t,r){"use strict";function i(){return++u}function o(e){var t=e;(0,l.isarray)(e)||(t=[e]);var r=!0,i=!1,o=void 0;try{for(var n,s=t[Symbol.iterator]();!(r=(n=s.next()).done);r=!0){var a=n.value;if("undefined"!=typeof h.style[a])return!0}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return!1}function n(e,t){var r=!0,i=!1,o=void 0;try{for(var n,s=Object.keys(t)[Symbol.iterator]();!(r=(n=s.next()).done);r=!0){var h=n.value,u=c[h];if(u)e.style[u]=t[h];else if("undefined"==typeof e.style[h])for(var d=0;d<2;d++){var _=!0,y=!1,p=void 0;try{for(var f,v=a.PREFIX[Symbol.iterator]();!(_=(f=v.next()).done);_=!0){var w=f.value,m=(0===d?w:(0,l.ucfirst)(w))+(0,l.ucfirst)(h);if("undefined"!=typeof e.style[m]){c[h]=m,e.style[m]=t[h];break}}}catch(e){y=!0,p=e}finally{try{!_&&v.return&&v.return()}finally{if(y)throw p}}}else c[h]=h,e.style[h]=t[h]}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}function s(e,t){var r={},i=!0,o=!1,s=void 0;try{for(var a,h=((0,l.isarray)(t)?t:[t])[Symbol.iterator]();!(i=(a=h.next()).done);i=!0){var u=a.value;r[u]=""}}catch(e){o=!0,s=e}finally{try{!i&&h.return&&h.return()}finally{if(o)throw s}}n(e,r)}Object.defineProperty(t,"__esModule",{value:!0}),t.generateid=i,t.hasstyle=o,t.setstyle=n,t.unsetstyle=s;var a=r(1),l=r(3),h=window.document.createElement("div"),u=0,c={}},function(e,t){"use strict";function r(e){return e.charAt(0).toUpperCase()+e.substr(1)}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ucfirst=r,t.isarray=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.support=void 0;var i=r(2),o={};o.transform3d=(0,i.hasstyle)(["perspectiveProperty","webkitPerspective","mozPerspective","oPerspective","msPerspective"]),o.transform=(0,i.hasstyle)(["transformProperty","webkitTransform","mozTransform","oTransform","msTransform"]),o.transition=(0,i.hasstyle)(["transitionProperty","webkitTransitionProperty","mozTransitionProperty","oTransitionProperty","msTransitionProperty"]),o.cssanim=(o.transform3d||o.transform)&&o.transition,o.transrate=o.transform3d?"translate3d":"translate";t.support=Object.freeze(o)}])});
//# sourceMappingURL=highendrawer.min.js.map